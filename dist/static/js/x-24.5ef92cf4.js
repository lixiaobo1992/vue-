(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-24"],{"0769":function(e,t,n){},"0e6e":function(e,t){e.exports="data:image/png;base64,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"},"5f8f":function(e,t,n){"use strict";var _=n("fb0e"),a=n.n(_);a.a},"89d8":function(e,t,n){"use strict";n.r(t);var _=function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",{staticClass:"page-order-pay"},[_("div",{staticClass:"product-box"},[_("p",{staticClass:"product-title max-line-2"},[e._v(e._s(e.order.item_name))]),_("div",{staticClass:"product-info"},[_("p",{staticClass:"product-price"},[e._v("¥"+e._s(e._f("price")(e.order.amount)))]),_("p",{staticClass:"product-address ellipsis"},[e._v(e._s(e.order.branch_name))])])]),_("div",{staticClass:"payway-box"},[_("p",{staticClass:"payway-item"},[e._v("\n      蜂蜜抵扣"+e._s(e._f("price")(e.honeyValue))+"元\n      "),_("img",{staticClass:"icon-honey",attrs:{src:n("0e6e")}}),_("span",{staticClass:"icon-check",on:{click:e.honeyClick}},[_("mt-switch",{attrs:{disabled:e.honeyClicked},on:{change:e.handleHoney},model:{value:e.honeyStatus,callback:function(t){e.honeyStatus=t},expression:"honeyStatus"}})],1)]),e._l(e.order.pay_channels,function(t,n){return _("p",{key:n,staticClass:"payway-item",on:{click:function(n){return e.selectPayway(t.id)}}},[e._v("\n      "+e._s(t.name)+" "),_("img",{staticClass:"icon-pay",attrs:{src:t.icon}}),_("span",{class:{"icon-select":!0,"icon-selected":e.payway==t.id}})])})],2),_("div",{staticClass:"notice-box"},[_("p",{staticClass:"notice-txt",on:{click:e.showNotice}},[e._v("\n      购买须知"),_("i",{staticClass:"arrow-right"})])]),_("div",{staticClass:"tips-box"},e._l(e.order.special_tips,function(t,n){return _("div",{key:n,staticClass:"tips-item ellipsis"},[e._v("\n      "+e._s(t.text)+" "),_("img",{staticClass:"icon-tip",attrs:{src:t.icon}})])}),0),_("div",{staticClass:"btn-bottom"},[e.order.warning_text?_("p",{staticClass:"buy-tip"},[e._v(e._s(e.order.warning_text))]):e._e(),_("div",{staticClass:"btn-submit",on:{click:e.onSubmit}},[e._v("\n      确认支付 ¥"+e._s(e._f("price")(e.finalAmount))+"\n    ")])]),e.dialogNotice?_("div",{staticClass:"dialog-notice",on:{click:e.showNotice}},[_("div",{staticClass:"d-main",on:{click:function(e){e.stopPropagation()}}},[_("p",{staticClass:"d-title"},[e._v("\n        购买须知"),_("i",{staticClass:"icon-close",on:{click:e.showNotice}})]),_("div",{staticClass:"d-container"},[_("div",{staticClass:"d-content",domProps:{innerHTML:e._s(e.order.tips)}})])])]):e._e(),_("div",{staticClass:"alipay-form",domProps:{innerHTML:e._s(e.alipayForm)}}),e.setInfo.popStatus?_("InvitePop",{attrs:{settingStatus:e.setInfo.settingStatus,setType:e.setInfo.setType,settingText:e.setInfo.settingText,btnText:e.setInfo.btnText},on:{btnEvent:e.btnEvent}}):e._e()],1)},a=[],i=n("f9b1"),s=i["a"],o=(n("5f8f"),n("2877")),r=Object(o["a"])(s,_,a,!1,null,"39973d37",null);t["default"]=r.exports},e6d7:function(e,t){e.exports=function(e){var t={};function n(_){if(t[_])return t[_].exports;var a=t[_]={i:_,l:!1,exports:{}};return e[_].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,_){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:_})},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=237)}({0:function(e,t){e.exports=function(e,t,n,_,a){var i,s=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(i=e,s=e.default);var r,c="function"===typeof s?s.options:s;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns),_&&(c._scopeId=_),a?(r=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=r):n&&(r=n),r){var u=c.functional,d=u?c.render:c.beforeCreate;u?c.render=function(e,t){return r.call(t),d(e,t)}:c.beforeCreate=d?[].concat(d,r):[r]}return{esModule:i,exports:s,options:c}}},110:function(e,t){},159:function(e,t,n){function _(e){n(110)}var a=n(0)(n(81),n(179),_,null,null);e.exports=a.exports},179:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"mint-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"mint-switch-input",attrs:{disabled:e.disabled,type:"checkbox"},domProps:{checked:Array.isArray(e.currentValue)?e._i(e.currentValue,null)>-1:e.currentValue},on:{change:function(t){e.$emit("change",e.currentValue)},__c:function(t){var n=e.currentValue,_=t.target,a=!!_.checked;if(Array.isArray(n)){var i=null,s=e._i(n,i);a?s<0&&(e.currentValue=n.concat(i)):s>-1&&(e.currentValue=n.slice(0,s).concat(n.slice(s+1)))}else e.currentValue=a}}}),e._v(" "),n("span",{staticClass:"mint-switch-core"}),e._v(" "),n("div",{staticClass:"mint-switch-label"},[e._t("default")],2)])},staticRenderFns:[]}},237:function(e,t,n){e.exports=n(45)},45:function(e,t,n){"use strict";var _=n(159),a=n.n(_);Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return a.a})},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"mt-switch",props:{value:Boolean,disabled:{type:Boolean,default:!1}},computed:{currentValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}}}})},f9b1:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4917"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_0__),_Users_libo_dwd_newbee_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("bd86"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_2__),mint_ui_lib_switch_style_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("0769"),mint_ui_lib_switch_style_css__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(mint_ui_lib_switch_style_css__WEBPACK_IMPORTED_MODULE_3__),mint_ui_lib_switch__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("e6d7"),mint_ui_lib_switch__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(mint_ui_lib_switch__WEBPACK_IMPORTED_MODULE_4__),_api__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("365c"),_utils_device__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("51e6"),_utils_bridge__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("4183"),_components_InvitePop__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("c7af"),_components;__webpack_exports__["a"]={name:"order-pay",components:(_components={},Object(_Users_libo_dwd_newbee_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(_components,mint_ui_lib_switch__WEBPACK_IMPORTED_MODULE_4___default.a.name,mint_ui_lib_switch__WEBPACK_IMPORTED_MODULE_4___default.a),Object(_Users_libo_dwd_newbee_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["a"])(_components,"InvitePop",_components_InvitePop__WEBPACK_IMPORTED_MODULE_8__["a"]),_components),data:function(){return{order:{},orderId:"",payway:2,dialogNotice:!1,alipayForm:"",honeyStatus:!0,honeyValue:0,honeyClicked:!1,finalAmount:0,honeyLimit:!1,honeyMessage:"",setInfo:{popStatus:!1,settingStatus:!0,btnText:["以后在说","去完成笔记"],setType:4,settingText:""}}},created:function(){var e=this.$route.query.id;e?this.initOrder(e):this.$showToast("缺少参数！")},methods:{honeyClick:function(){this.honeyLimit&&(this.setInfo.popStatus=!0)},handleHoney:function(){this.finalAmount=this.honeyStatus?this.order.final_amount:this.order.amount},initOrder:function(e){var t=this;_api__WEBPACK_IMPORTED_MODULE_5__["a"].orderPayment({activity_id:e},function(e){var n=e.data,_=t;_.order=n,_.orderId=n.order_id,n.honey_deduction&&(_.honeyValue=n.honey_deduction.honey_spend,_.honeyStatus=n.honey_deduction.selected,_.honeyLimit=n.honey_deduction.honey_limit,_.setInfo.settingText=n.honey_deduction.message),_.finalAmount=n.final_amount,0==_.honeyValue&&(_.honeyClicked=!0,_.honeyStatus=!1)},function(e){91220003==e.errno&&t.$showToast("蜂蜜余额不足, 请取消当前订单重新下单支付!")})},selectPayway:function(e){this.payway==e?this.payway="":this.payway=e},showNotice:function(){this.dialogNotice=!this.dialogNotice},onSubmit:function(){var e=this.payway;""==e?this.$showToast("请选择支付方式"):1==e?_utils_device__WEBPACK_IMPORTED_MODULE_6__["a"].wechat?this.creatOrderPay():this.$showToast("请在微信中打开支付"):2==e&&(_utils_device__WEBPACK_IMPORTED_MODULE_6__["a"].wechat?this.$showToast("请点击右上角选择从浏览器中打开，并完成支付"):this.creatOrderPay())},creatOrderPay:function creatOrderPay(){var _this2=this,return_url=window.location.origin+"/order-result";this.alipayForm="";var params={activity_id:this.order.activity_id,pay_channel_id:this.payway};this.orderId&&(params.order_id=this.orderId),2==this.payway&&(params.return_url=return_url),this.honeyStatus&&(params.honey_spend=this.honeyValue),_api__WEBPACK_IMPORTED_MODULE_5__["a"].paymentApply(params,function(res){_this2.honeyClicked=!0,_this2.orderId=res.data.order_id;var that=_this2;if(1==params.pay_channel_id){var signData=decodeURIComponent(res.data.pay_sign_data);signData=JSON.parse(signData);var query={id:res.data.order_id,dwd_trade_no:res.data.trade_no,replace:!0},payData={appid:signData.appId,timestamp:signData.timeStamp,nonceStr:signData.nonceStr,package:signData.package,signType:signData.signType,paySign:signData.paySign,success:function(e){that.$forward("order-result",query)},fail:function(e){that.$showToast("支付失败，请重试~")},cancel:function(e){},complete:function(e){}};that.$hideLoading(),_utils_bridge__WEBPACK_IMPORTED_MODULE_7__["a"].ready(function(e){e.chooseWXPay(payData)})}else if(2==params.pay_channel_id){var str=res.data.pay_sign_data,reg=/(.*?)<script[^>]*?>(.*?)<\/script>/i,form=str.match(reg);_this2.alipayForm=form[1],_this2.$nextTick(function(){eval(form[2])})}},function(e){})},btnEvent:function(e){0==e.index?this.setInfo.popStatus=!1:(this.setInfo.popStatus=!1,this.$forward("order",{type:4,index:2}))}}}},fb0e:function(e,t,n){}}]);