(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-39"],{"01c7":function(t,a,i){"use strict";var e=i("9021"),s=i.n(e);s.a},"0791":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACKCAMAAABGrPJrAAACjlBMVEUAAAAAAAABAQEAAAADAwEAAAABAQAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAFBQICAgH/203+203/2k3+20392Uz/3E3/203+2k3000qKfzX72Ez82Uz000rDqTvz00tUSxw1MBP72Ez62Ez72Ez31Uv82Uz21Uv82U3y0Un72EzmxkbewESymTjfwUamkDPfwUfJsUBkYCb+20731UvpyUfoyEb31Evmxkfdv0PKrz7z0knIrj7HrUBiViB6bCi9qD6pmzr/203+203+2k382U3xz0n41Uv100vz0krev0T00knqykjStT/000vkxUbvz0nXukKymjjvz0mVgC/uzknIrj+CcinszknjxUWgjjL92U341kv21Ev82k3wz0n510vnx0b31kv100v510z41kzavUL410vdwEPy0UvMsT/XukLjxEjoyUijjTTXvEPhw0eUhDE0NBFxcTn41kzuzkn21Ez51kzwz0nPs0DewEXZvEPQtUCfiTDDqzxtYySSgDExMRRSRx/+200jGBUqHxc0KBr610wsIBf41UsoHRatkjjy0ErsykjIqz+ReTFbSSPvzUnevkVxXikmGxXfwEXTtUKagjPDpj6NdjB1YSpENh1CNB3200oyJhn00kroxkfPsUG5nTuUezJ5ZCtlUiVLPB9IOR9GOB44KxowJBjhwUXbu0TOsEDKrEDGqj+zlzqvlDimjTefhjWGcC6BbC1/aS1sWSdRQSE+MBw7Lhvwzknty0jqyUfjw0a/oj28oTy2mjqWfjKKcy9gTiRdTCRXRyJOPh/XuELMr0CqkDipjzd3Yyp0YCpoVif82UzlxUflxEZ7ZyxVRSJVRCI5LBrLrT+kijY6YDrZAAAAhXRSTlMAAgUDCAsNBhEPCRQTGB0aFh8b+uv08Ob+9tDBDeHUulhQKiHj283NxMO8tp2Pgko6NysfEODSnZeVh3lhXEktKiYbEfzo2LWyqJ2Cfn13bGFgW1JPSD8+NzU0MBfn2MiqnpiTkY6HdXVzbGtpZVJIKSgiHx0JtaWHg3RvXVhMRUAxKhoZFBqzOQAACp9JREFUeNrs2ElPE3EYBnDFQoUrLShRDAcNIRyIwMEDmrhGjcYlRuOSGOMSY+IajRo1Xp6X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"},"1c14":function(t,a,i){"use strict";var e,s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"product-box"},[i("div",{staticClass:"product-list"},t._l(t.productListData,function(a,e){return i("product-item",{key:"product_"+e+a.pid,attrs:{item:a,index:e},on:{btnEvent:t.btnEvent}})}),1)])},n=[],c=(i("c5f6"),i("cebc")),o=i("bd86"),r=(i("7f7f"),i("3892"),i("450f")),l=i.n(r),d=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"product-item",class:{"small-item":2===t.item.classType},on:{click:t.gotoProductDetail}},[i("div",{staticClass:"product-item-box"},[i("div",{staticClass:"img-box jzimg"},[i("img",{staticClass:"product-img",attrs:{src:t.item.src,alt:"image"}})]),i("div",{staticClass:"product-info clearfix"},[i("p",{staticClass:"max-line-2 product-name"},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.item.is_new,expression:"item.is_new"}],staticClass:"new"},[t._v("新品")]),t._v(t._s(t.item.title)+"\n      ")]),i("div",{staticClass:"product-address"},[i("p",{staticClass:"ellipsis"},[t._v(t._s(t.item.brandName))]),i("span",[t._v(t._s(t._f("distance")(t.item.distance)))])]),i("div",{staticClass:"price-box"},[i("p",[i("span",{staticClass:"price",class:{lessPrice:t.isLessPrice,gray:1==t.item.btnStatus.btnState}},[t.isLessPrice?[t._v("已砍"+t._s(t.item.bargained))]:[t._v("¥"+t._s(t._f("price")(t.item.curPrice)))]],2),i("del",[t._v("¥"+t._s(t._f("price")(t.item.delPrice)))])]),i("span",{staticClass:"bargain-btn",class:{cheng:2==t.item.btnStatus.btnState,lv:3==t.item.btnStatus.btnState,lan:4==t.item.btnStatus.btnState},on:{click:function(a){return a.stopPropagation(),t.handleBtnClick(a)}}},[t._v("\n          "+t._s(t.item.btnStatus.btnText)+"\n          "),t.item.isload?i("mt-spinner",{staticClass:"spinnerStyle",attrs:{type:3,color:"#ffffff",size:20}}):t._e()],1)])])])])},h=[],u=(i("c6f8"),i("e8c9")),f=i.n(u),p={name:"product-item",props:{item:{type:Object,required:!0},index:Number},components:Object(o["a"])({},f.a.name,f.a),data:function(){return{isLessPrice:!1}},watch:{item:function(t,a){var i=this,e=t.isload,s=t.is_bargained,n=a.is_bargained;e||!n&&s&&(this.isLessPrice=!0,setTimeout(function(){i.isLessPrice=!1},1500))}},methods:{handleBtnClick:function(){this.$emit("btnEvent",Object.assign({},this.item,{index:this.index}))},gotoProductDetail:function(){this.$forward("product-detail",{id:this.item.pid})}}},g=p,v=(i("2253"),i("2877")),b=Object(v["a"])(g,d,h,!1,null,"3e351817",null),m=b.exports,w=i("4183"),A=i("11a9"),x=i("51e6"),k=i("ed08"),y=i("2f62"),D=i("4360"),S=i("365c"),C=i("e380"),_={name:"product-list",props:{listData:{type:Array,default:function(){return[]}}},components:(e={},Object(o["a"])(e,l.a.name,l.a),Object(o["a"])(e,m.name,m),e),data:function(){return{productListData:[],isMSF:x["a"].msf,tongdunFingerprintStatus:!1,blackBox:"",sessionId:""}},watch:{listData:function(t,a){var i=this;setTimeout(function(){i.productListData=i.dealList(t)},0)}},computed:Object(c["a"])({},Object(y["d"])({logged:function(t){return t.user.logged},userInfo:function(t){return t.user.userInfo}})),created:function(){this.productListData=this.dealList(this.listData);var t=this;this.isMSF&&w["a"].getAppConfig({success:function(a){var i=a.data;t.tongdunFingerprintStatus=i.tongdunFingerprint,t.tongdunFingerprintStatus&&w["a"].getSystemInfo({success:function(a){var i=a.data;t.blackBox=i.blackBox}})}})},methods:Object(c["a"])({},Object(y["b"])(["setShareMask"]),{dealList:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.map(function(a){return t.filterItemData(a)})},filterItemData:function(t){var a=this.getBtnState(t);return{pid:t.activity_id,src:t.item_pic,title:t.item_name,is_new:t.is_new,curPrice:t.current_price,delPrice:t.market_price,brandName:t.branch_name,distance:t.distance||0,bargainCount:t.bargain_count||0,is_bargained:t.is_bargained,classType:"shop-detail"===this.$route.name?2:1,btnStatus:a}},getBtnState:function(t){var a="已抢光",i=1;return t.is_sold?(i=1,a="已抢光"):Number(t.current_price)<=Number(t.floor_price)?(a="马上抢",i=4):t.is_bargained?(a="再砍",i=3):(a="砍价",i=2),{btnText:a,btnState:i}},btnEvent:function(t){var a=t.btnStatus,i=t.pid,e="index:".concat(t.index,",value:{goodId:").concat(i,",goodBargainStatus:").concat(a,"}");if(C["a"].event("c_good_cheap",e),this.logged)switch(a.btnState){case 2:this.bargain(t);break;case 3:this.againBargain(t);break;case 1:case 4:case 5:this.goBooking(t);break;default:}else x["a"].msf?w["a"].login({success:function(t){var a=t.data;D["a"].commit("SET_USERINFO",a)},fail:function(t){A["a"].showToast("登录失败，请重试！")}}):this.$forward("login")},bargain:function(t){var a=this,i=this;this.$showLoading("正在砍价中..."),t.isload=!0,this.productListData.splice(t.index,1,Object.assign({},t)),S["a"].bargain({activity_id:t.pid,showLoading:!1,black_box:this.sessionId?"":this.blackBox,afs_session_id:this.sessionId},function(e){a.$hideLoading();var s=e.data.reduce,n=void 0===s?0:s,c=a.filterItemData(e.data);c.isload=!1,c.is_bargained=!0,c.bargained=n,c.index=t.index,i.productListData.splice(t.index,1,Object.assign({},c)),a.sessionId=""},function(e){if(a.$hideLoading(),t.isload=!1,91220003==e.errno||91220013==e.errno||91220004==e.errno||91220014==e.errno){var s="已抢光",n=1;91220003==e.errno?(n=5,s="已下架"):91220013!=e.errno&&91220014!=e.errno||(n=4,s="马上抢"),t.btnStatus={btnText:s,btnState:n}}else(9125103==e.errno&&a.isMSF||9125102==e.errno&&a.isMSF)&&w["a"].securityGuard({success:function(a){var e=a.data;e&&e.sessionID&&(i.sessionId=e.sessionID,i.bargain(t),i.sessionId="")}});a.productListData.splice(t.index,1,Object.assign({},t))})},againBargain:function(t){if(C["a"].event("c_product_share"),x["a"].wechat||x["a"].msf){var a=t.delPrice,i=t.curPrice,e=t.title,s=t.src,n=t.brandName,o=t.pid,r={title:e,weixin_timeline:{title:"最低1折起，快来砍价！".concat(n,":").concat(e)},desc:"原价¥".concat(Object(k["c"])(a,100),"， 现在只要¥").concat(Object(k["c"])(i,100),"!快来帮我，最低只要1折起！"),link:"".concat(location.origin,"/bargain?id=").concat(o,"&publisher=").concat(this.userInfo.id||0),imgUrl:s};x["a"].wechat?(this.setShareMask({isShow:!0,type:2}),w["a"].setShare(r)):x["a"].msf&&w["a"].showShare(Object(c["a"])({},r,{url:location.href,success:function(t){},onlySelectChannel:["weixin","weixin_timeline","copy_link"]}))}else this.$showToast({message:"您的客户端不支持分享，手动分享此页面吧～",duration:3e3})},goBooking:function(t){var a="index:".concat(t.index,",value:{goodId:").concat(t.pid,"}");C["a"].event("c_good",a),this.$forward("product-detail",{id:t.pid})}})},L=_,E=(i("f12b"),Object(v["a"])(L,s,n,!1,null,"1a9c7986",null));a["a"]=E.exports},2253:function(t,a,i){"use strict";var e=i("8a9d"),s=i.n(e);s.a},2446:function(t,a,i){"use strict";var e=i("cebc"),s=i("51e6"),n=i("4183"),c=0;a["a"]={data:function(){return{isLoading:!0,pullLoading:!1,finished:!1,imgIsLoading:!1,scrollCheck:!1,finishedTip:"没有更多数据了",loadingTip:"加载中...",listData:[],pullParamsDefault:{page_num:1,page_limit:20,need_pagination:1,page_serial:""},pullParams:{}}},methods:{initPullList:function(){this.pullParams.page_serial="",this.pullParams.page_num=1,this.finished=!1,this.pullLoading=!1},onRefresh:function(){this.initPullList(),window.scrollTo(0,10)},onScrollToLower:function(){var t=this;if(!this.pullLoading)if(this.finished)this.pullLoading=!1;else{this.pullLoading=!0;var a=c;c++,this.pullModel(Object(e["a"])({},this.pullParamsDefault,this.pullParams,{showLoading:!1}),function(i){t.$hideLoading(),t.isLoading=!1,t.pullLoading=!1,c-1>a||(s["a"].msf&&n["a"].stopRefresh(),"function"===typeof t.afterPull&&t.afterPull(i),t.dealData(i))},function(a){t.$hideLoading(),t.pullLoading=!1,s["a"].msf&&n["a"].stopRefresh()},this)}},pullModel:function(){},dealData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.pullParams.page_num,i=void 0===a?1:a,e=t.data,s=void 0===e?{}:e;this.pullParams.page_serial=s.page_serial||"";var n=s.list||[],c=s.total_page>i;if(1!==i||n.length||(c=!1),1===i&&(this.listData=[]),c&&(this.pullParams.page_num+=1),this.finished=!c,"function"===typeof this.dealList&&n.length){var o=this.dealList(n)||[];if(!o)return void this.$showToast("处理数据返回格式有问题");n=o.filter(function(t){return t})}this.listData=this.listData.concat(n),"function"===typeof this.afterPullData&&this.afterPullData(t)}}}},"8a9d":function(t,a,i){},9021:function(t,a,i){},"93f8":function(t,a,i){"use strict";i.r(a);var e,s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-shop-detail",class:{"is-header":t.isShowHeader}},[e("cm-header",{staticClass:"shop-header",class:{show:t.isShowHeader},attrs:{"left-options":{backText:""},fixed:""}},[e("span",[t._v(t._s(t.detailData.branch_name))]),e("div",{staticClass:"share-btn",attrs:{slot:"right"},on:{click:function(a){return t.$store.dispatch("setShareMask",{isShow:!0})}},slot:"right"})]),e("vue-scroll",{staticClass:"page-scroll",attrs:{finished:t.finished,listLen:t.listData.length,isLoading:t.isLoading,finishedTip:t.finishedTip,"immediate-check":t.scrollCheck},on:{onScrollToLower:t.onScrollToLower},model:{value:t.pullLoading,callback:function(a){t.pullLoading=a},expression:"pullLoading"}},[e("div",{ref:"shopTop",staticClass:"shop-box",class:{white:t.branchBg.isBg}},[e("div",{staticClass:"box-bg",style:t.branchBg.style}),e("div",{staticClass:"shop-content"},[e("p",{staticClass:"shop-name"},[t._v(t._s(t.detailData.branch_name))]),e("div",{staticClass:"collect-box",class:{"white-bg":t.detailData.favorite_status},on:{click:t.collectBranch}},[e("span",{staticClass:"collect-btn"},[t._v(t._s(t.detailData.favorite_status?"已收藏":"我想去"))]),e("img",{staticClass:"collect-img",attrs:{src:"https://img1.haoshiqi.net/miniapp/msf/seeding-icon_f572e1a6de.png"}})]),e("div",{staticClass:"shop-label"},[t.detailData.labels&&t.detailData.labels.length?e("p",t._l(t.detailData.labels,function(a){return e("span",{key:a.id},[t._v(t._s(a.name))])}),0):t._e(),e("span",[t._v(t._s(t._f("distance")(t.detailData.distance)))])]),e("div",{staticClass:"shop-address"},[e("div",{staticClass:"address",attrs:{"data-type":"map"},on:{click:t.gotoNext}},[e("i",{staticClass:"icon-addres"}),e("p",[t._v(t._s(t.detailData.address))])]),e("a",{staticClass:"icon-tel",attrs:{href:"tel:"+t.detailData.phone},on:{click:function(a){return a.stopPropagation(),t.trackEvent("c_store_phone")}}})])])]),t.detailData.description?e("div",{staticClass:"shop-header-box"},[e("div",{staticClass:"shop-introduce-header"},[e("span",[t._v("店铺介绍")])])]):t._e(),e("div",{staticClass:"shop-cont"},[e("div",{staticClass:"shop-introduce-box"},[t._v("\n        "+t._s(t.detailData.description)+"\n      ")]),t.detailData.description.length>200?e("div",{staticClass:"introduce-pop"}):t._e()]),t.activityProduct.length?[e("div",{staticClass:"list-header-box",attrs:{"data-tag":"product"}},[e("div",{staticClass:"list-header",style:t.productHeaderBoxStyle},[e("span",[t._v("底价一元·探店福利·限量抢购")])])]),e("div",{staticClass:"hot-product"},[e("product-list",{attrs:{listData:t.activityProduct}})],1)]:t._e(),e("div",{staticClass:"list-header-box",attrs:{"data-tag":"article"}},[e("div",{staticClass:"list-header",style:t.articleHeaderBoxStyle},[e("span",[t._v("觅食笔记")])])]),e("div",{staticClass:"list-box"},[e("water-fall",{ref:"waterfall",on:{ontap:t.onArticleTap,complete:t.onComplete}})],1),e("div",{staticClass:"not-article",attrs:{slot:"not-data","data-type":"publish"},on:{click:t.gotoNext},slot:"not-data"},[e("img",{attrs:{src:i("0791"),alt:""}}),e("p",[t._v("第一个探店的人有额外奖励"),e("br"),t._v("现在就来写一篇觅食笔记吧")])]),e("div",{staticClass:"finishedTip",attrs:{slot:"finishedTip","data-type":"publish"},on:{click:t.gotoNext},slot:"finishedTip"},[e("p",[t._v("快来写下你的探店心得吧！")]),e("img",{attrs:{src:i("0791"),alt:""}})])],2)],1)},n=[],c=(i("ac4d"),i("8a81"),i("ac6a"),i("cebc")),o=i("bd86"),r=(i("7f7f"),i("2f62")),l=i("51e6"),d=i("4183"),h=i("2446"),u=i("365c"),f=i("79bb"),p=i("c2a1"),g=i("1c14"),v=i("42a5"),b=i("e380"),m={name:"shop-detail",mixins:[h["a"]],components:(e={},Object(o["a"])(e,f["b"].name,f["b"]),Object(o["a"])(e,f["c"].name,f["c"]),Object(o["a"])(e,p["a"].name,p["a"]),Object(o["a"])(e,g["a"].name,g["a"]),e),data:function(){return{id:this.$route.query.id,detailData:{},articleHeaderBoxStyle:{},productHeaderBoxStyle:{},activityList:[]}},beforeCreate:function(){},created:function(){var t=this;if(this.$showLoading(),this.getGeo({name:"shop-detail",success:function(a){t.getData()},fail:function(a){t.getData()}}),l["a"].msf){var a=this,i=["weixin","weixin_timeline","copy_link"];this.$version.gt("1.3.1")&&i.splice(2,0,"weibo"),d["a"].addNavigationBarMenu({right:[{type:"share",id:1,icon:"share",text:"分享",color:"",fontSize:""}],success:function(t){if("share"===t.data.type){var e="快来觅食蜂围观 @".concat(a.detailData.branch_name," 百位美食达人千次探店测评，抢一元探店套餐！"),s="快来@觅食蜂 围观@".concat(a.detailData.branch_name," 百位美食达人千次探店测评，抢一元探店套餐 ").concat(location.href," （觅食蜂，美食达人聚集地 https://m.mishifeng.com/download ）");d["a"].showShare({type:0,title:"觅食蜂 美食达人聚集地",weixin_timeline:{title:e},weibo:{title:s},desc:e,link:location.href,url:location.href,imgUrl:a.detailData.branch_head_pic,success:function(t){},onlySelectChannel:i})}}})}},mounted:function(){var t=this;this.$nextTick(function(){t.scrollHeader()})},beforeDestroy:function(){Object(v["a"])(this.$el,"scroll",function(){})},computed:Object(c["a"])({},Object(r["d"])({geoInfo:function(t){return t.location.geoInfo}}),{branchBg:function(){var t=this.detailData.pic_list,a=void 0===t?[]:t;return a.length?{isBg:!0}:{isBg:!1,style:{}}},isShowHeader:function(){return!l["a"].msf},activityProduct:function(){return l["a"].msf&&this.$version.lte("1.0.0")?[]:this.activityList&&this.activityList.length?this.activityList:[]}}),methods:Object(c["a"])({},Object(r["b"])(["getGeo","setShareMask"]),{onComplete:function(t,a){},getData:function(){this.$showLoading(),this.initPullList(),this.pullParams.branch_id=this.id||6,this.getBranchDetail(),this.onScrollToLower()},pullModel:function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];u["a"].articleList.apply(this,a)},afterPull:function(t){var a=this,i=t.data,e=void 0===i?{}:i,s=e.list||[];this.$nextTick(function(){a.$refs.waterfall.setDate(s,0)})},getBranchDetail:function(){var t=this;u["a"].branchDetail({id:this.id},function(a){var i=a.data,e=i.branch_name,s=i.branch_head_pic,n=i.cat_info,c=i.cbd_info,o=i.phone,r=i.address,h=i.distance,u=i.favorite_status,f=i.lat,p=i.lng,g=i.pic_list,v=i.description,b=i.activity_list,m=void 0===b?[]:b,w=[];if(n&&w.push(n),c&&w.push(c),t.activityList=m,t.detailData={branch_name:e,branch_head_pic:s,labels:w,phone:o,address:r,distance:h,favorite_status:u,lat:f,lng:p,pic_list:g,description:v},l["a"].wechat){var A="快来觅食蜂围观 @".concat(t.detailData.branch_name," 百位美食达人千次探店测评，抢一元探店套餐！");d["a"].setShare({title:"觅食蜂 美食达人聚集地",weixin_timeline:{title:A},desc:A,link:location.href,imgUrl:t.detailData.branch_head_pic})}},function(t){})},gotoNext:function(t){b["a"].event("c_store_location");var a=t.currentTarget.dataset.type;switch(a){case"map":this.$forward("map",{lng:this.detailData.lng,lat:this.detailData.lat,title:this.detailData.branch_name,address:this.detailData.address});break;case"publish":this.$forward("publish",{branch_id:this.id});break;default:}},scrollHeader:function(){var t=this,a=this.$el.querySelector(".shop-header"),i=a.getBoundingClientRect();Object(v["b"])(this.$el,"scroll",function(){var a=t.$el.querySelectorAll(".list-header-box"),e=[],s=!0,n=!1,c=void 0;try{for(var o,r=a[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var l=o.value,d=l.dataset.tag,h=l.getBoundingClientRect();h.tagKey="".concat(d,"HeaderBoxStyle"),e.push(h)}}catch(w){n=!0,c=w}finally{try{s||null==r.return||r.return()}finally{if(n)throw c}}for(var u="",f=0;f<e.length;f++){var p=e[f];p.top<=i.height&&(u=p.tagKey)}var g=e.every(function(t){return t.top>i.height});if(g&&(u=""),u)t[u]={position:"fixed",transform:"translateZ(0)",top:"".concat(i.height,"px"),background:"rgba(255,255,255,0.85)",boxShadow:"0 2px 4px 0 rgba(0,0,0,0.15)"};else for(var v=0;v<e.length;v++)t[e[v].tagKey]={};for(var b=0;b<e.length;b++){var m=e[b];u?m.tagKey!==u&&(t[m.tagKey]={}):t[m.tagKey]={}}})},onArticleTap:function(t){var a=t.id,i=t.media_type;2==i?l["a"].msf&&(this.$version.gte("2.0.0")?this.$forward("video-list",{id:a,type:2}):this.$forward("article",{id:a})):this.$forward("article",{id:a})},trackEvent:function(t){b["a"].event(t)},collectBranch:function(){var t=this;u["a"].branchCollect({branch_id:this.id},function(a){t.detailData.favorite_status=!t.detailData.favorite_status},function(t){})}})},w=m,A=(i("01c7"),i("2877")),x=Object(A["a"])(w,s,n,!1,null,"c8d15202",null);a["default"]=x.exports},d930:function(t,a,i){},f12b:function(t,a,i){"use strict";var e=i("d930"),s=i.n(e);s.a}}]);