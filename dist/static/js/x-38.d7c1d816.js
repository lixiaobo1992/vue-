(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-38"],{"0db3":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAeCAYAAABNChwpAAAAAXNSR0IArs4c6QAABP1JREFUSA21V1tMnEUUnjO7gBZkKS3sDSpFdkulIa2ESmNKTWpMvKSRaNLEYpoYW7GNSU1NjIkPxPjkkzHG60PTxhajfWhpK1WTCmmiTZXERBFhkRBYdlmIlIJc9jbHc/7t/PwsK1JYJ9n/XObMd86cOXNZEKtoPm/JTkzCARRinwD0Agq3EGCjoWGSQwLljyix/YWjx260traqVUCaJmByGRifu/RZFPgOoqjO0L1MBSCCKOTb5du2n+rs7EwsM8igyBiAf4uzUsXwHDl/OH0MAEwK5JkLduBBxM1El+KA6LMLe3NfOPxz+vh0eelA6vV7nfuVwi8JuFgb08y6aGZn78lTl3qGJsa0nunOioqi2dj8k6jwIAV8wOwDWCDwlwbC42dNXQZmSQB+j/MxpVQHrbWdbcnxH/Q9QSDfZBi7TOV3ueqVUO9TIA26U0rxYiA0cUrL6VRqRbXX60+i+sp0LqDdVli8e7XOGad/bOwnh7e8kSL/ROMiwsc+t7tRy+nUCIDSDQkVa6O1LWIDSsul5pZjTX19fTPpA/5L7u7ujv8ZHm8BIT9gW8LOVZj4orbWmZ9prBGAz+Nspkp/iA0o7b15m8Tzd7ud0sF37W08QWjX7ujdc+N4Mt2GZeDZV7mdgxRrBSukhMcDofHvmF9v83s81UrFf+VlBQF/OzYUlHUPDt624kpfmYu2Wso5pf77bDlnJ/2hEBWxOMM8FWbB9MLsU8xbm8QkNmkFgmzTfLaotMlzGguVekbzmkpahD1a4H2u+WxRj297F2U2VcwgTF8aXwKChwVeo/RDRhuth/KRjAKGDAwULipuc+uzTiIIIwAEDBtG/8OHdlaIYbkYz5/+sMTqgqLBaEoBedaOrPKIJjbGc+NWbEmpN6KjdXLxlrR2ZovXWSbw+G8jI7esuLwew6zgE8t3v/tBa2c2+LrKSge9H7YaPkAM0W1KK7HYOADz0IH44pZcNFkfx3ufPOYwCjk3fWlUKXPgghYoC4fr6uoMY61bL6W9f0RjUAAdmtdU9g9HBqlKu1hBp1XVVHi4RXeul/q8Lp79owYOiMChI698nY5pFJ2/zLU7mUjeoE6KRUwD2BsC4XBvuvHdyDu2ljrnF8RNKq4tPO7f3gVcA6I/OHaT0vM58xRxIWLyck1FiYvltbSampKChXlxQTuneV07dPT46UxYRga4g+/ruQl1na7lXSxTKoI2YW9azbuO7XXj92QyhhdpKjsMHcC8zZbr6w8GR7WNlfLT2miRyGy82LHxihDqOVI46FdIp+Ph4vvyizcXOrr/mpmZS1lm/vIECmXBG5hUZ8ii3GJFRa1wcmb2W4vOZM0MaE3tA87S2Tl1ntZir9bRYTVLl8VViUiXle13YbeHcuzRZDSW40aR9NOjgooNn6YxG/UYsg8QP0W6etZRRt8bCE+8ZvbfYZYFwHreirfDI28JJU4ScManVDqQRVbk7dP8Eng9Gi2SielbHVQLj3A/P9MGxiKvWmxJt0JLVTK+KRAO0pquWJSpLGFbji3v3d5gkGdvNC7I6KS4QrXVyAqQ8FFgNHJcn4grBpCCINd0R2wrd9fTobJPYeqvGQLwgRWRKEJol9fzHJt+6OnpiekxVmoU+Li6rM8Ecv5ZIBR5mYNYVQBWsLXydR7PhimVaKfp7CfHUZDYEBid+GWteGsat6es7N4qV+lF+gPzhAb4B0Tv3SSLbTzDAAAAAElFTkSuQmCC"},"0fa5":function(t,a,i){"use strict";i.r(a);var e,s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-probe-shop",class:{"is-header":t.isShowHeader}},[e("cm-header",{staticClass:"shop-header",class:{show:t.isShowHeader},attrs:{"left-options":{showBack:!1},fixed:""}},[e("div",{staticClass:"currentCity",attrs:{slot:"left","data-type":"city"},on:{click:t.gotoNext},slot:"left"},[e("span",[t._v(t._s(t.currentCity))]),e("i",{staticClass:"icon-down"})]),e("p",{staticClass:"currentAddress",attrs:{"data-type":"search-shop"},on:{click:t.gotoNext}},[e("i",{staticClass:"icon-loaction"}),e("span",[t._v(t._s(t.currentAddress))]),e("i",{staticClass:"icon-down"})]),e("div",{staticClass:"search-btn",attrs:{slot:"right","data-type":"search-article"},on:{click:t.gotoNext},slot:"right"},[e("img",{attrs:{src:i("0db3"),alt:""}})])]),e("vue-scroll",{staticClass:"page-scroll",attrs:{finished:t.finished,listLen:t.listData.length,isLoading:t.isLoading,finishedTip:t.finishedTip,"immediate-check":t.scrollCheck},on:{onScrollToLower:t.onScrollToLower},model:{value:t.pullLoading,callback:function(a){t.pullLoading=a},expression:"pullLoading"}},[e("shop-list",{attrs:{listData:t.listData}})],1)],1)},l=[],n=i("cebc"),c=i("bd86"),o=(i("7f7f"),i("2f62")),r=i("2446"),d=i("365c"),u=i("79bb"),h=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"probe-shop-list"},t._l(t.listData,function(t,a){return i("shop-item",{key:"shop_"+a+t.id,attrs:{item:t}})}),1)},p=[],f=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"shop-item"},[i("div",{staticClass:"shop-detail",attrs:{"data-type":"detail"},on:{click:t.gotoNext}},[i("div",{staticClass:"shop-img"},[i("img",{attrs:{src:t.item.branch_head_pic}})]),i("div",{staticClass:"shop-info"},[i("p",{staticClass:"ellipsis shop-title"},[t._v(t._s(t.item.branch_name))]),i("div",{staticClass:"shop-label"},[t.item.labels&&t.item.labels.length?i("p",t._l(t.item.labels,function(a){return i("span",{key:a.id},[t._v(t._s(a.name))])}),0):t._e(),i("em",{staticClass:"distance"},[t._v(t._s(t._f("distance")(t.item.distance)))])])])]),t.item.pic_list&&t.item.pic_list.length?i("div",{staticClass:"imgs-box",attrs:{"data-type":"detail"},on:{click:t.gotoNext}},[1===t.item.pic_list.length?i("div",{staticClass:"one-box",class:{show:1===t.item.pic_list.length}},[i("img",{attrs:{src:t.item.pic_list[0].pic,alt:""}})]):i("div",{staticClass:"list-box"},t._l(t.item.pic_list.slice(0,4),function(t,a){return i("div",{key:"pic_"+t.id+a,staticClass:"img-item"},[i("img",{attrs:{src:t.pic,alt:""}})])}),0)]):t._e(),t.item.article_list&&t.item.article_list.length?i("div",{staticClass:"evaluate-box"},[t._l(t.item.article_list.slice(0,3),function(a,e){return i("div",{key:"article_"+a.id+e,staticClass:"evaluate-item",attrs:{"data-type":"article"},on:{click:function(i){return t.gotoNext(i,a)}}},[i("div",{staticClass:"user-pic"},[i("img",{attrs:{src:a.avatar,alt:a.avatar}})]),i("span",{staticClass:"user-name"},[t._v(t._s(a.nickname))]),i("p",{staticClass:"ellipsis eval-doc"},[t._v(t._s(a.title))])])}),t.item.article_cnt>3?i("p",{staticClass:"evaluate-more",attrs:{"data-type":"detail"},on:{click:t.gotoNext}},[t._v("\n      查看全部"+t._s(t.item.article_cnt)+"条觅食笔记 >>\n    ")]):t._e()],2):t._e()])},m=[],g={name:"shop-item",props:{item:Object},data:function(){return{}},created:function(){},methods:{gotoNext:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.currentTarget.dataset.type;switch(i){case"detail":this.$forward("shop-detail",{id:this.item.id});break;case"article":this.$forward("article",{id:a.id});break;default:}}}},b=g,v=(i("30fd"),i("2877")),_=Object(v["a"])(b,f,m,!1,null,"09db748c",null),A=_.exports,L={name:"shop-list",props:{listData:{type:Array,default:function(){return[]}}},components:Object(c["a"])({},A.name,A)},w=L,C=(i("3567"),Object(v["a"])(w,h,p,!1,null,"5146acd4",null)),k=C.exports,O=i("2ddd"),D=i("51e6"),R=i("4183"),j={name:"shop",mixins:[r["a"]],components:(e={},Object(c["a"])(e,u["b"].name,u["b"]),Object(c["a"])(e,u["c"].name,u["c"]),Object(c["a"])(e,k.name,k),e),data:function(){return{}},beforeCreate:function(){},created:function(){var t=this;this.$showLoading(),this.getGeo({name:"probe-shop",success:function(a){t.getData()},fail:function(a){t.getData()}});var a=this;D["a"].msf&&(R["a"].enableRefresh(),R["a"].onLocationChanged({success:function(t){var i=t.data,e=void 0===i?{}:i,s=e.area,l={id:e.id,lat:e.lat,lng:e.lng,name:e.name,address:e.address},n={};e.area&&(n={id:s.zoneId,lat:s.lat,lng:s.lng,name:s.name,address:s.address}),a.setSelectCity(l),a.setSelectAddress(n),a.getData()}}),R["a"].onPullRefresh({success:function(t){a.getData()}}))},mounted:function(){},computed:Object(n["a"])({},Object(o["d"])({location:function(t){return t.location}}),Object(o["c"])(["currAddress"]),{currentCity:function(){var t=this.location.locationState,a=t.code,i=t.text,e=i;return 2!==a&&3!==a||(e=this.currAddress.name),e},currentAddress:function(){return Object(O["d"])(this.location.selectAddress)?this.location.selectAddress.name:"附近美食"},isShowHeader:function(){return!D["a"].msf}}),beforeDestroy:function(){D["a"].msf&&(R["a"].offLocationChanged(function(t){}),R["a"].disableRefresh(),R["a"].offPullRefresh(function(t){}))},methods:Object(n["a"])({},Object(o["b"])(["getGeo","setSelectCity","setSelectAddress"]),{getData:function(){this.$showLoading(),this.initPullList();var t=this.location.selectAddress;Object(O["d"])(t)&&(this.pullParams.lng=t.lng,this.pullParams.lat=t.lat),this.onScrollToLower()},pullModel:function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];d["a"].branchListFull.apply(this,a)},dealList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map(function(t){var a=[];return t.cat_info&&a.push(t.cat_info),t.cbd_info&&a.push(t.cbd_info),{id:t.id,branch_name:t.branch_name,branch_head_pic:t.branch_head_pic,labels:a,distance:t.distance,pic_list:t.pic_list,article_cnt:t.article_cnt,article_list:t.article_list}})},gotoNext:function(t){var a=t.currentTarget.dataset.type;switch(a){case"city":this.$forward(a);break;case"search-shop":this.$forward(a);break;case"search-article":this.$forward(a);break;default:}}})},x=j,P=(i("9fe1"),Object(v["a"])(x,s,l,!1,null,"5f9ac5eb",null));a["default"]=P.exports},2446:function(t,a,i){"use strict";var e=i("cebc"),s=i("51e6"),l=i("4183"),n=0;a["a"]={data:function(){return{isLoading:!0,pullLoading:!1,finished:!1,imgIsLoading:!1,scrollCheck:!1,finishedTip:"没有更多数据了",loadingTip:"加载中...",listData:[],pullParamsDefault:{page_num:1,page_limit:20,need_pagination:1,page_serial:""},pullParams:{}}},methods:{initPullList:function(){this.pullParams.page_serial="",this.pullParams.page_num=1,this.finished=!1,this.pullLoading=!1},onRefresh:function(){this.initPullList(),window.scrollTo(0,10)},onScrollToLower:function(){var t=this;if(!this.pullLoading)if(this.finished)this.pullLoading=!1;else{this.pullLoading=!0;var a=n;n++,this.pullModel(Object(e["a"])({},this.pullParamsDefault,this.pullParams,{showLoading:!1}),function(i){t.$hideLoading(),t.isLoading=!1,t.pullLoading=!1,n-1>a||(s["a"].msf&&l["a"].stopRefresh(),"function"===typeof t.afterPull&&t.afterPull(i),t.dealData(i))},function(a){t.$hideLoading(),t.pullLoading=!1,s["a"].msf&&l["a"].stopRefresh()},this)}},pullModel:function(){},dealData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.pullParams.page_num,i=void 0===a?1:a,e=t.data,s=void 0===e?{}:e;this.pullParams.page_serial=s.page_serial||"";var l=s.list||[],n=s.total_page>i;if(1!==i||l.length||(n=!1),1===i&&(this.listData=[]),n&&(this.pullParams.page_num+=1),this.finished=!n,"function"===typeof this.dealList&&l.length){var c=this.dealList(l)||[];if(!c)return void this.$showToast("处理数据返回格式有问题");l=c.filter(function(t){return t})}this.listData=this.listData.concat(l),"function"===typeof this.afterPullData&&this.afterPullData(t)}}}},"30a8":function(t,a,i){},"30fd":function(t,a,i){"use strict";var e=i("30a8"),s=i.n(e);s.a},3567:function(t,a,i){"use strict";var e=i("b213"),s=i.n(e);s.a},"9fe1":function(t,a,i){"use strict";var e=i("f931"),s=i.n(e);s.a},b213:function(t,a,i){},f931:function(t,a,i){}}]);