(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-17"],{"21fa":function(e,t,i){},"61f7":function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return o});var s=/^(1[3-9][0-9])\d{8}$/,o=/^(\d{6}|\d{4})$/},c154:function(e,t,i){"use strict";i.r(t);var s,o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-invite-register",style:{backgroundColor:e.bgColor}},[i("div",{staticClass:"invite-top"},[i("div",{staticClass:"top-bg"},[i("img",{staticClass:"bg-img",attrs:{src:e.topBg}})])]),i("div",{staticClass:"invite-bottom"},[i("div",{staticClass:"invite-content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.pageType,expression:"pageType == 1"}],staticClass:"register-box"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showSlider,expression:"showSlider"}],staticClass:"slider-box",attrs:{id:"slider"}}),i("div",{staticClass:"form-input",class:{error:this.errorMobile}},[i("Icon",{staticClass:"mobile-icon",attrs:{type:"mobile"}}),i("i",{staticClass:"line"}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.formMsg.mobile,expression:"formMsg.mobile",modifiers:{trim:!0}}],ref:"mobile",staticClass:"input-text",attrs:{type:"tel",maxlength:"11",placeholder:"请输入手机号"},domProps:{value:e.formMsg.mobile},on:{input:function(t){t.target.composing||e.$set(e.formMsg,"mobile",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})],1),i("div",{staticClass:"form-input code",class:{error:this.errorCode}},[i("Icon",{staticClass:"code-icon",attrs:{type:"code"}}),i("i",{staticClass:"line"}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.formMsg.authCode,expression:"formMsg.authCode",modifiers:{trim:!0}}],ref:"code",staticClass:"input-text",attrs:{type:"tel",maxlength:"6",placeholder:"请输入验证码"},domProps:{value:e.formMsg.authCode},on:{input:function(t){t.target.composing||e.$set(e.formMsg,"authCode",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("span",{class:{"count-down":this.isGotCode},on:{click:e.clickCodeBtn}},[e._v(e._s(e.countDownTip))])],1),i("div",{staticClass:"receive",on:{click:e.register}},[e._v("一键领取")])]),2==e.pageType?i("div",{staticClass:"receive-box"},[i("div",{staticClass:"gift-image"},[i("img",{attrs:{src:e.gift}})]),i("span",{staticClass:"success-desc"},[e._v("成功获得2000g蜂蜜奖励")]),i("div",{staticClass:"receive downLoadApp",on:{click:e.downLoadApp}},[e._v("\n          立即打开觅食蜂\n        ")])]):e._e(),3==e.pageType?i("div",{staticClass:"share-box"},[i("div",{staticClass:"share-img"},[i("img",{staticClass:"share-bg",attrs:{src:e.shareBg}})]),i("span",{staticClass:"inviteNum"},[e._v("今日已邀请好友("),i("i",{staticClass:"num"},[e._v(e._s(e.inviteInfo.invited_count))]),e._v("/"+e._s(e.inviteInfo.max_inv_count)+")")]),i("div",{staticClass:"share-content"},e._l(e.shareList,function(t,s){return i("div",{key:s,staticClass:"item",class:{item2:3==e.shareList.length&&1==s,"normal-item":2==e.shareList.length},on:{click:function(t){return e.goShare(s)}}},[i("div",[i("Icon",{staticClass:"share-icon",attrs:{type:t.iconName}})],1),i("span",{staticClass:"item-desc"},[e._v(e._s(t.desc))])])}),0)]):e._e()]),i("div",{staticClass:"invite-rules"},[i("div",{staticClass:"rules-title",style:{"background-image":"url("+e.rulesTitleBg+")","background-repeat":"round"}},[e._v("\n        规则说明\n      ")]),i("ul",e._l(e.rules,function(t,s){return i("li",{key:s},[e._v(e._s(t))])}),0)])])])},a=[],n=(i("6762"),i("2fdb"),i("cebc")),r=i("365c"),c=i("61f7"),l=i("a516"),d=i("2f62"),h=i("38a5"),u=i("51e6"),m=i("4183"),g=i("d958"),p=60,v={name:"invite-register",components:{Icon:h["a"]},data:function(){return{isMSF:u["a"].msf,pageType:1,errorMobile:!1,errorCode:!1,formMsg:{mobile:"",authCode:""},topBg:"",bgColor:"",shareBg:"",rulesTitleBg:"",rules:[],gift:"",countDownTip:"获取验证码",isGotCode:!1,countDown:p,showSlider:!1,shareCode:"",shareList:[{iconName:"share-wechat",desc:"微信邀请"},{iconName:"weibo",desc:"微博邀请"}],userName:"",wechatShareImg:"",weiboShareImg:"",inviteInfo:{invited_count:0,max_inv_count:10}}},created:function(){var e=this;this.isMSF&&this.$version.lte("1.3.1")&&this.shareList.pop();var t=this.$route.query||{};this.pageType=t.pageType||1,this.shareCode=window.decodeURIComponent(t.shareCode||""),this.userName=window.decodeURIComponent(t.userName||""),1==this.pageType&&Object(l["loadJs"])("//g.alicdn.com/sd/nch5/index.js?t=2015052012",{onload:function(){e.initSlider()}}),this.inviteInitData()},methods:Object(n["a"])({},Object(d["b"])(["setShareMask"]),{inviteInitData:function(){var e=this;r["a"].inviteInitData({},function(t){var i=t.data;if(e.topBg=i.pg_head,e.bgColor=i.bg_color,e.rules=i.rules,e.shareBg=i.share,e.rulesTitleBg=i.rectangle,e.gift=i.gift,e.inviteInfo={invited_count:i.invited_count,max_inv_count:i.max_inv_count},e.wechatShareImg=i.share_wx,e.weiboShareImg=i.share_wb,u["a"].wechat&&!e.isMSF){var s="你的好友@".concat(e.userName," 求你帮Ta点一下，领20元探店福利一起吃大餐！"),o="".concat(window.location.origin,"/invite-register?pageType=1&shareCode=").concat(e.shareCode);m["a"].setShare({title:"就差你啦！".concat(e.userName," 喊你帮Ta点一下，领20元一起探店吃大餐吧！"),weixin_timeline:{title:s,desc:s},imgUrl:e.wechatShareImg,desc:"快来和我一起加入觅食蜂，领20元探店福利一起享美味！",url:o,link:o})}},function(e){})},checkForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["mobile","authCode"],t=this.formMsg,i=t.mobile,s=t.authCode;if(this.errorMobile=!1,e.includes("mobile")){if(!i)return this.$showToast("请输入手机号"),void(this.errorMobile=!0);if(!c["a"].test(i))return this.$showToast("手机号格式不正确"),void(this.errorMobile=!0)}return this.errorCode=!1,e.includes("authCode")&&!c["b"].test(s)?(this.$showToast("请输入正确的验证码"),void(this.errorCode=!0)):!this.errorMobile&&!this.errorCode},register:function(){var e=this;this.checkForm()&&r["a"].receiveBoon({invite_code:this.shareCode,auth_code:this.formMsg.authCode,mobile:this.formMsg.mobile},function(t){e.showSlider=!1,s.hide(),e.pageType=2},function(e){})},clickCodeBtn:function(){this.checkForm(["mobile"])&&!this.intervalId&&(this.showSlider=!0,s.show())},getCode:function(e){var t=this;this.intervalId||(this.isGotCode=!0,this.countDownTip="".concat(this.countDown,"s"),this.intervalId=setInterval(function(){t.countDown--,t.countDown>0?t.countDownTip="".concat(t.countDown,"s"):(clearInterval(t.intervalId),t.intervalId=null,t.countDownTip="重新发送验证码",t.countDown=p)},1e3),r["a"].mobileCode({mobile:this.formMsg.mobile,type:5,platform:"h5",afs_session_id:e.sessionId,afs_token:e.nc_token,afs_sig:e.sig,afs_scene:e.scene},function(e){},function(e){}))},initSlider:function(){var e=this,t=["FFFF000000000167FF9D",(new Date).getTime(),Math.random()].join(":");s=window.NoCaptcha.init({renderTo:"#slider",appkey:"FFFF000000000167FF9D",scene:"register_h5",token:t,initHidden:!0,callback:function(i){s.reset(),e.showSlider=!1,e.getCode({nc_token:t,scene:"register_h5",sessionId:i.csessionid,sig:i.sig})},error:function(e){}}),window.NoCaptcha.setEnabled(!0),s.reset(),window.NoCaptcha.upLang("cn",{LOADING:"加载中...",SLIDER_LABEL:"请向右滑动验证",CHECK_Y:"验证通过"})},getShareInfo:function(){return{url:"".concat(window.location.origin,"/invite-register?pageType=1&shareCode=").concat(this.shareCode),link:"".concat(window.location.origin,"/invite-register?pageType=1&shareCode=").concat(this.shareCode),title:"就差你啦！".concat(this.userName," 喊你帮Ta点一下，领20元一起探店吃大餐吧！"),desc:"快来和我一起加入觅食蜂，领20元探店福利一起享美味！"}},goShare:function(e){var t="",i="",s=this.wechatShareImg;switch(e){case 0:if(t="weixin",u["a"].wxapp){var o="".concat(window.location.origin,"/invite-register?pageType=1&shareCode=").concat(this.shareCode),a={desc:"test",title:"在吗？邀你领取20元美食红包，点开一起遨游美食世界！",imgUrl:s,link:o};window.wx.miniProgram.postMessage({data:a})}break;case 1:t="weibo",i="#觅食蜂探店#就差你啦！你的好友@".concat(this.userName," 求你帮Ta点一下，领20元探店福利一起吃大餐吧！").concat(window.location.origin,"/invite-register?pageType=1&shareCode=").concat(this.shareCode,"（下载@觅食蜂 ，抢1折起探店套餐！https://m.mishifeng.com/download）"),s=this.weiboShareImg;break}var n=Object.assign(this.getShareInfo(),{imgUrl:s,wakeup:t,weixin_timeline:{title:i,desc:i},weibo:{title:i,desc:i},weixin:{title:i,desc:i,isMini:!0,pagePath:"pages/web-view/web-view?jumplink="+encodeURIComponent("".concat(window.location.origin,"/invite-register?pageType=1&shareCode=").concat(this.shareCode)),userName:"gh_f711793d5963"},onlySelectChannel:["weixin","weixin_timeline"]});this.isMSF?m["a"].showShare(n):(this.setShareMask({isShow:!0}),g["default"].setShare(n))},downLoadApp:function(){"iphone"==u["a"].system?location.href="https://itunes.apple.com/cn/app/id1435026988?mt=8":"android"==u["a"].system&&(location.href="https://sj.qq.com/myapp/detail.htm?apkName=com.doweidu.mishifeng")}})},w=v,f=(i("ea07"),i("2877")),C=Object(f["a"])(w,o,a,!1,null,"a95865ba",null);t["default"]=C.exports},ea07:function(e,t,i){"use strict";var s=i("21fa"),o=i.n(s);o.a}}]);