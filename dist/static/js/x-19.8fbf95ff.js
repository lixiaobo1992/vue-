(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-19"],{"4bb4":function(t,i,n){"use strict";n.r(i);var a,e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"page-map"},[n("div",{attrs:{id:"container"}}),n("div",{staticClass:"card-box"},[n("div",{staticClass:"card"},[n("div",{staticClass:"line1px bottom address-info"},[n("span",[t._v(t._s(t.title))]),n("p",[t._v(t._s(t.address))])]),n("div",{staticClass:"option-box"},[n("p",{on:{click:t.packUp}},[t._v("去这里 >>")])])])]),n("div",{staticClass:"path-box",class:{show:t.isShowPath}},[n("div",{staticClass:"pack-up",on:{click:t.packUp}},[n("span",{staticClass:"btn"})]),n("div",{staticClass:"line1px bottom path-option"},[n("div",{staticClass:"fashion-item",class:{active:"walk"===t.currentItem},on:{click:function(i){return t.selectPath("walk")}}},[t._v("\n        步行\n      ")]),n("div",{staticClass:"fashion-item",class:{active:"bus"===t.currentItem},on:{click:function(i){return t.selectPath("bus")}}},[t._v("\n        公交\n      ")]),n("div",{staticClass:"fashion-item",class:{active:"driving"===t.currentItem},on:{click:function(i){return t.selectPath("driving")}}},[t._v("\n        打的\n      ")])]),n("div",{staticClass:"path-info"},[n("div",{staticClass:"detail-box"},[n("div",{ref:"panel",staticClass:"detail-list",attrs:{id:"panel"}})])])])])},s=[],o=(n("386d"),n("c5f6"),n("cebc")),c=n("2f62"),r=n("a4eb"),l=(n("28a5"),n("d225")),d=n("b0b4"),u=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Object(l["a"])(this,t),i.length){var n=i[0],a=i[1],e=window,s=e.AMap;this.coordinate=new s.LngLat(Number(n),Number(a)),this.initMap()}}return Object(d["a"])(t,[{key:"initMap",value:function(){var t=window,i=t.AMap;this.map=new i.Map("container",{resizeEnable:!0,center:this.coordinate,zoom:13})}},{key:"addMarker",value:function(){try{var t=window,i=t.AMap;this.marker=new i.Marker({map:this.map,position:this.coordinate,icon:new i.Icon({size:new i.Size(40,50),image:"https://webapi.amap.com/theme/v1.3/images/newpc/way_btn2.png",imageOffset:new i.Pixel(0,-60)})})}catch(n){}}},{key:"markerControl",value:function(t){t?this.marker.show():this.marker.hide()}},{key:"addPlugin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=window,n=i.AMap;return new Promise(function(i,a){for(var e=0;e<t.length;e++){var s=t[e].split(".");n.hasOwnProperty(s[1])&&i()}n.plugin(t,function(){i()})})}}]),t}(),p=u,h={name:"map-page",data:function(){return{isShowPath:!1,currentItem:"walk",paths:{walk:{time:0,pathText:"",distance:0,steps:[]},driving:{time:0,pathText:"",distance:0,steps:[]},bus:{time:0,pathText:"",distance:0,steps:[]}}}},created:function(){var t=this;this.getGeo({name:"map-box",success:function(i){t.initConfig()},fail:function(i){t.initConfig()}})},computed:Object(o["a"])({},Object(c["d"])({location:function(t){return t.location}}),Object(c["c"])(["currAddress"]),{title:function(){var t=this.$route.query.title;return t?decodeURIComponent(t):""},address:function(){var t=this.$route.query.address;return t?decodeURIComponent(t):""}}),beforeDestroy:function(){a=null},methods:Object(o["a"])({},Object(c["b"])(["getGeo"]),{initConfig:function(){var t=this,i=window,n=i.AMap;this.$showLoading(),n?this.$nextTick(function(){t.initMap()}):r["a"].geoInitGd().then(function(i){t.initMap()})},initMap:function(){try{var t=this.$route.query,i=t.lat,n=t.lng;a=new p([n,i]),a.addPlugin(["AMap.ToolBar"]).then(function(){var t=window,i=t.AMap,n=new i.ToolBar({offset:new i.Pixel(10,260),locate:!0,noIpLocate:!0});a.map.addControl(n)}),this.initWalk()}catch(e){}},initWalk:function(){if(a){var t=this,i=this.currAddress,n=i.lat,e=i.lng,s=window,o=s.AMap,c=new o.LngLat(Number(e),Number(n));a.addPlugin(["AMap.Walking"]).then(function(){var i={map:a.map,hideMarkers:!1,isOutline:!0,panel:"panel",outlineColor:"#ffeeee",autoFitView:!0},n=new o.Walking(i);n.clear(),n.search(c,a.coordinate,function(i,n){t.$hideLoading()})})}},initBus:function(){if(a){var t=this,i=this.currAddress,n=i.lat,e=i.lng,s=i.citycode;a.addPlugin(["AMap.Transfer"]).then(function(){var i=window,o=i.AMap,c={map:a.map,nightflag:!0,city:s,panel:"panel",outlineColor:"#ffeeee",autoFitView:!0,policy:o.TransferPolicy.LEAST_TIME},r=new o.Transfer(c);r.search([e,n],a.coordinate,function(i,n){t.$hideLoading()})})}},initDriving:function(){if(a){var t=this,i=this.currAddress,n=i.lat,e=i.lng;a.addPlugin(["AMap.Driving"]).then(function(){var i=window,s=i.AMap,o={policy:s.DrivingPolicy.LEAST_TIME,ferry:1,map:a.map,panel:"panel"},c=new s.Driving(o);c.search([e,n],a.coordinate,function(i,n){t.$hideLoading()})})}},selectPath:function(t){this.currentItem=t,this.$showLoading(),this.$refs.panel.innerHTML="","walk"===t?this.initWalk():"bus"===t?this.initBus():"driving"===t&&this.initDriving()},packUp:function(){this.isShowPath=!this.isShowPath}})},f=h,v=(n("8c6d"),n("2877")),w=Object(v["a"])(f,e,s,!1,null,"c46b8b8e",null);i["default"]=w.exports},"8c6d":function(t,i,n){"use strict";var a=n("962b"),e=n.n(a);e.a},"962b":function(t,i,n){}}]);