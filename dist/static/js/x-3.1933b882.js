(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-3"],{"0190":function(t,a,i){"use strict";var n=i("19b4"),e=i.n(n);e.a},1470:function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"star-box"},t._l(t.starData,function(a,n){return i("span",{key:n,staticClass:"star-item",class:{active:a},on:{click:function(a){return a.stopPropagation(),t.clickEvent(n)}}})}),0)},e=[],s=(i("ac6a"),i("456d"),i("c5f6"),{name:"star",props:{value:Number,scoreMax:{type:Number,default:5}},data:function(){return{type:1,cardinal:this.scoreMax/5}},created:function(){},mounted:function(){},computed:{starData:function(){for(var t=[],a=Math.ceil(5*this.value/this.scoreMax),i=1;i<=5;i++)i<=a?t.push(1):t.push(0);return t}},methods:{clickEvent:function(t){if(Object.keys(this._events).indexOf("input")>-1){var a=t+1;this.value==this.cardinal&&0==t&&(a=0),this.$emit("input",this.cardinal*a)}}}}),r=s,c=(i("4649"),i("2877")),o=Object(c["a"])(r,n,e,!1,null,"053b221c",null);a["a"]=o.exports},"19b4":function(t,a,i){},"1aaf":function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"brach-address"},[i("div",{staticClass:"addredd-info",on:{click:t.goMap}},[i("Icon",{staticClass:"location",attrs:{type:"map"}}),i("p",{staticClass:"address"},[t._v(t._s(t.addressInfo.address))])],1),i("a",{staticClass:"icon-tel",attrs:{href:"tel:"+t.addressInfo.phoneNumber},on:{click:function(a){return a.stopPropagation(),t.telDetail()}}},[t._v(" ")])])},e=[],s=i("38a5"),r=i("e380"),c={name:"branch-address",components:{Icon:s["a"]},props:{addressInfo:{type:Object,default:function(){return{}}}},data:function(){return{id:""}},created:function(){this.id=this.$route.query.id},methods:{goMap:function(){r["a"].event("c_good_location","value:{storeId:".concat(this.id,"}")),this.$forward("map",this.addressInfo)},telDetail:function(){r["a"].event("c_good_location","value:{storeId:".concat(this.id,"}"))}}},o=c,l=(i("90f8"),i("2877")),d=Object(l["a"])(o,n,e,!1,null,"55876238",null);a["a"]=d.exports},"1c14":function(t,a,i){"use strict";var n,e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"product-box"},[i("div",{staticClass:"product-list"},t._l(t.productListData,function(a,n){return i("product-item",{key:"product_"+n+a.pid,attrs:{item:a,index:n},on:{btnEvent:t.btnEvent}})}),1)])},s=[],r=(i("c5f6"),i("cebc")),c=i("bd86"),o=(i("7f7f"),i("3892"),i("450f")),l=i.n(o),d=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"product-item",class:{"small-item":2===t.item.classType},on:{click:t.gotoProductDetail}},[i("div",{staticClass:"product-item-box"},[i("div",{staticClass:"img-box jzimg"},[i("img",{staticClass:"product-img",attrs:{src:t.item.src,alt:"image"}})]),i("div",{staticClass:"product-info clearfix"},[i("p",{staticClass:"max-line-2 product-name"},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.item.is_new,expression:"item.is_new"}],staticClass:"new"},[t._v("新品")]),t._v(t._s(t.item.title)+"\n      ")]),i("div",{staticClass:"product-address"},[i("p",{staticClass:"ellipsis"},[t._v(t._s(t.item.brandName))]),i("span",[t._v(t._s(t._f("distance")(t.item.distance)))])]),i("div",{staticClass:"price-box"},[i("p",[i("span",{staticClass:"price",class:{lessPrice:t.isLessPrice,gray:1==t.item.btnStatus.btnState}},[t.isLessPrice?[t._v("已砍"+t._s(t.item.bargained))]:[t._v("¥"+t._s(t._f("price")(t.item.curPrice)))]],2),i("del",[t._v("¥"+t._s(t._f("price")(t.item.delPrice)))])]),i("span",{staticClass:"bargain-btn",class:{cheng:2==t.item.btnStatus.btnState,lv:3==t.item.btnStatus.btnState,lan:4==t.item.btnStatus.btnState},on:{click:function(a){return a.stopPropagation(),t.handleBtnClick(a)}}},[t._v("\n          "+t._s(t.item.btnStatus.btnText)+"\n          "),t.item.isload?i("mt-spinner",{staticClass:"spinnerStyle",attrs:{type:3,color:"#ffffff",size:20}}):t._e()],1)])])])])},u=[],f=(i("c6f8"),i("e8c9")),p=i.n(f),h={name:"product-item",props:{item:{type:Object,required:!0},index:Number},components:Object(c["a"])({},p.a.name,p.a),data:function(){return{isLessPrice:!1}},watch:{item:function(t,a){var i=this,n=t.isload,e=t.is_bargained,s=a.is_bargained;n||!s&&e&&(this.isLessPrice=!0,setTimeout(function(){i.isLessPrice=!1},1500))}},methods:{handleBtnClick:function(){this.$emit("btnEvent",Object.assign({},this.item,{index:this.index}))},gotoProductDetail:function(){this.$forward("product-detail",{id:this.item.pid})}}},g=h,b=(i("2253"),i("2877")),v=Object(b["a"])(g,d,u,!1,null,"3e351817",null),m=v.exports,_=i("4183"),C=i("11a9"),w=i("51e6"),I=i("ed08"),k=i("2f62"),y=i("4360"),x=i("365c"),S=i("e380"),L={name:"product-list",props:{listData:{type:Array,default:function(){return[]}}},components:(n={},Object(c["a"])(n,l.a.name,l.a),Object(c["a"])(n,m.name,m),n),data:function(){return{productListData:[],isMSF:w["a"].msf,tongdunFingerprintStatus:!1,blackBox:"",sessionId:""}},watch:{listData:function(t,a){var i=this;setTimeout(function(){i.productListData=i.dealList(t)},0)}},computed:Object(r["a"])({},Object(k["d"])({logged:function(t){return t.user.logged},userInfo:function(t){return t.user.userInfo}})),created:function(){this.productListData=this.dealList(this.listData);var t=this;this.isMSF&&_["a"].getAppConfig({success:function(a){var i=a.data;t.tongdunFingerprintStatus=i.tongdunFingerprint,t.tongdunFingerprintStatus&&_["a"].getSystemInfo({success:function(a){var i=a.data;t.blackBox=i.blackBox}})}})},methods:Object(r["a"])({},Object(k["b"])(["setShareMask"]),{dealList:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.map(function(a){return t.filterItemData(a)})},filterItemData:function(t){var a=this.getBtnState(t);return{pid:t.activity_id,src:t.item_pic,title:t.item_name,is_new:t.is_new,curPrice:t.current_price,delPrice:t.market_price,brandName:t.branch_name,distance:t.distance||0,bargainCount:t.bargain_count||0,is_bargained:t.is_bargained,classType:"shop-detail"===this.$route.name?2:1,btnStatus:a}},getBtnState:function(t){var a="已抢光",i=1;return t.is_sold?(i=1,a="已抢光"):Number(t.current_price)<=Number(t.floor_price)?(a="马上抢",i=4):t.is_bargained?(a="再砍",i=3):(a="砍价",i=2),{btnText:a,btnState:i}},btnEvent:function(t){var a=t.btnStatus,i=t.pid,n="index:".concat(t.index,",value:{goodId:").concat(i,",goodBargainStatus:").concat(a,"}");if(S["a"].event("c_good_cheap",n),this.logged)switch(a.btnState){case 2:this.bargain(t);break;case 3:this.againBargain(t);break;case 1:case 4:case 5:this.goBooking(t);break;default:}else w["a"].msf?_["a"].login({success:function(t){var a=t.data;y["a"].commit("SET_USERINFO",a)},fail:function(t){C["a"].showToast("登录失败，请重试！")}}):this.$forward("login")},bargain:function(t){var a=this,i=this;this.$showLoading("正在砍价中..."),t.isload=!0,this.productListData.splice(t.index,1,Object.assign({},t)),x["a"].bargain({activity_id:t.pid,showLoading:!1,black_box:this.sessionId?"":this.blackBox,afs_session_id:this.sessionId},function(n){a.$hideLoading();var e=n.data.reduce,s=void 0===e?0:e,r=a.filterItemData(n.data);r.isload=!1,r.is_bargained=!0,r.bargained=s,r.index=t.index,i.productListData.splice(t.index,1,Object.assign({},r)),a.sessionId=""},function(n){if(a.$hideLoading(),t.isload=!1,91220003==n.errno||91220013==n.errno||91220004==n.errno||91220014==n.errno){var e="已抢光",s=1;91220003==n.errno?(s=5,e="已下架"):91220013!=n.errno&&91220014!=n.errno||(s=4,e="马上抢"),t.btnStatus={btnText:e,btnState:s}}else(9125103==n.errno&&a.isMSF||9125102==n.errno&&a.isMSF)&&_["a"].securityGuard({success:function(a){var n=a.data;n&&n.sessionID&&(i.sessionId=n.sessionID,i.bargain(t),i.sessionId="")}});a.productListData.splice(t.index,1,Object.assign({},t))})},againBargain:function(t){if(S["a"].event("c_product_share"),w["a"].wechat||w["a"].msf){var a=t.delPrice,i=t.curPrice,n=t.title,e=t.src,s=t.brandName,c=t.pid,o={title:n,weixin_timeline:{title:"最低1折起，快来砍价！".concat(s,":").concat(n)},desc:"原价¥".concat(Object(I["c"])(a,100),"， 现在只要¥").concat(Object(I["c"])(i,100),"!快来帮我，最低只要1折起！"),link:"".concat(location.origin,"/bargain?id=").concat(c,"&publisher=").concat(this.userInfo.id||0),imgUrl:e};w["a"].wechat?(this.setShareMask({isShow:!0,type:2}),_["a"].setShare(o)):w["a"].msf&&_["a"].showShare(Object(r["a"])({},o,{url:location.href,success:function(t){},onlySelectChannel:["weixin","weixin_timeline","copy_link"]}))}else this.$showToast({message:"您的客户端不支持分享，手动分享此页面吧～",duration:3e3})},goBooking:function(t){var a="index:".concat(t.index,",value:{goodId:").concat(t.pid,"}");S["a"].event("c_good",a),this.$forward("product-detail",{id:t.pid})}})},B=L,P=(i("f12b"),Object(b["a"])(B,e,s,!1,null,"1a9c7986",null));a["a"]=P.exports},"1d9e":function(t,a,i){t.exports=i.p+"static/img/icon@2x.d2a1baf8.png"},2253:function(t,a,i){"use strict";var n=i("8a9d"),e=i.n(n);e.a},2446:function(t,a,i){"use strict";var n=i("cebc"),e=i("51e6"),s=i("4183"),r=0;a["a"]={data:function(){return{isLoading:!0,pullLoading:!1,finished:!1,imgIsLoading:!1,scrollCheck:!1,finishedTip:"没有更多数据了",loadingTip:"加载中...",listData:[],pullParamsDefault:{page_num:1,page_limit:20,need_pagination:1,page_serial:""},pullParams:{}}},methods:{initPullList:function(){this.pullParams.page_serial="",this.pullParams.page_num=1,this.finished=!1,this.pullLoading=!1},onRefresh:function(){this.initPullList(),window.scrollTo(0,10)},onScrollToLower:function(){var t=this;if(!this.pullLoading)if(this.finished)this.pullLoading=!1;else{this.pullLoading=!0;var a=r;r++,this.pullModel(Object(n["a"])({},this.pullParamsDefault,this.pullParams,{showLoading:!1}),function(i){t.$hideLoading(),t.isLoading=!1,t.pullLoading=!1,r-1>a||(e["a"].msf&&s["a"].stopRefresh(),"function"===typeof t.afterPull&&t.afterPull(i),t.dealData(i))},function(a){t.$hideLoading(),t.pullLoading=!1,e["a"].msf&&s["a"].stopRefresh()},this)}},pullModel:function(){},dealData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.pullParams.page_num,i=void 0===a?1:a,n=t.data,e=void 0===n?{}:n;this.pullParams.page_serial=e.page_serial||"";var s=e.list||[],r=e.total_page>i;if(1!==i||s.length||(r=!1),1===i&&(this.listData=[]),r&&(this.pullParams.page_num+=1),this.finished=!r,"function"===typeof this.dealList&&s.length){var c=this.dealList(s)||[];if(!c)return void this.$showToast("处理数据返回格式有问题");s=c.filter(function(t){return t})}this.listData=this.listData.concat(s),"function"===typeof this.afterPullData&&this.afterPullData(t)}}}},"36f2":function(t,a,i){},"370a":function(t,a,i){},4649:function(t,a,i){"use strict";var n=i("d04c"),e=i.n(n);e.a},"608a":function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"bottom-nav"},[n("div",{staticClass:"nav-con"},[n("span",{staticClass:"footer-txt"},[n("img",{staticClass:"left-img",attrs:{src:i("1d9e")}}),t._v("\n      "+t._s(t.downLoadText)+"\n    ")]),n("span",{staticClass:"bottom-btn",on:{click:t.downloadEvent}},[t._v("立即打开")])])])},e=[],s=i("51e6"),r=i("e380"),c={name:"DownloadNav",props:{downLoadText:{type:String,default:"探店套餐1折抢"}},components:{},data:function(){return{}},methods:{downloadEvent:function(){r["a"].event("c_bargain_initiate");var t=this.$route.query,a=void 0===t?{}:t;"iphone"==s["a"].system?location.href=a.ios_url||"https://itunes.apple.com/cn/app/id1435026988?mt=8":"android"==s["a"].system&&(location.href=a.android_url||"https://sj.qq.com/myapp/detail.htm?apkName=com.doweidu.mishifeng")}}},o=c,l=(i("79e5b"),i("2877")),d=Object(l["a"])(o,n,e,!1,null,"f4c32c82",null);a["a"]=d.exports},"671e":function(t,a,i){},"79e5b":function(t,a,i){"use strict";var n=i("36f2"),e=i.n(n);e.a},"7fce":function(t,a,i){"use strict";var n=i("671e"),e=i.n(n);e.a},"8a9d":function(t,a,i){},"90f8":function(t,a,i){"use strict";var n=i("a5c0"),e=i.n(n);e.a},a5c0:function(t,a,i){},d04c:function(t,a,i){},d930:function(t,a,i){},df3a:function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("span",{staticClass:"avatar-warapper"},[i("div",{staticClass:"avatar-border"},[i("div",{staticClass:"vue-avatar",class:t.classes,style:t.styles},[t._t("default")],2),i("Icon",{staticClass:"avatar-mask",attrs:{type:"avatar-mask",color:t.maskColor}}),i("i",{directives:[{name:"show",rawName:"v-show",value:t.navSatus,expression:"navSatus"}],staticClass:"bottom-nav",class:{navvip:t.navSatus},style:t.navStyles},[i("sub",{directives:[{name:"show",rawName:"v-show",value:t.navType>0,expression:"navType > 0"}]},[t._v(t._s(t.navText.navText))])])],1)])},e=[],s=i("bd86"),r=(i("ac6a"),i("456d"),i("6762"),i("2fdb"),i("c5f6"),i("38a5")),c=i("526c"),o=i.n(c),l=i("e9d2"),d=i.n(l),u=i("a4b8"),f=i.n(u),p={scaleToFill:"contain",aspectFill:"cover",widthFix:"100% auto",heightFix:"auto 100%"},h={name:"avatar",components:{Icon:r["a"]},props:{prefixCls:String,src:String,spin:Boolean,shadow:Boolean,size:[String,Number],bg:String,color:String,mode:{type:String,default:"aspectFill",validator:function(t){return Object.keys(p).includes(t)}},shape:{type:String,validator:function(t){return["circle","hexagon"].includes(t)}},navSatus:{type:[Boolean,Number],default:!1},navType:{type:Number,default:0},navsrc:{type:String,default:o.a},maskColor:{type:String,default:"#ffffff"}},computed:{classes:function(){var t,a=this.$props,i=a.spin,n=a.shadow,e=a.shape;return t={},Object(s["a"])(t,"is-spin",i),Object(s["a"])(t,"is-".concat(e),!!e),Object(s["a"])(t,"is-shadow",!!n),t},styles:function(){var t=this.$props,a=t.src,i=t.size,n=void 0===i?0:i,e=t.color,s=t.bg,r=t.mode;return{backgroundImage:a?"url('".concat(a,"')"):null,width:"".concat(n/100,"rem"),height:"".concat(n/100,"rem"),color:!!e,backgroundColor:s||null,backgroundSize:p[r]}},navStyles:function(){var t=this.$props.navType,a="";switch(t){case 0:a=null;break;case 1:a=o.a;break;case 2:a=f.a;break;case 3:a=d.a;break;default:break}return{backgroundImage:"url('".concat(a,"')")}},navText:function(){var t=this.$props.navType,a="";switch(t){case 0:a="";break;case 1:a="认证达人";break;case 2:a="探店达人";break;case 3:a="官方账号";break;default:break}return{navText:a}}}},g=h,b=(i("0190"),i("2877")),v=Object(b["a"])(g,n,e,!1,null,"45f7c22a",null);a["a"]=v.exports},f12b:function(t,a,i){"use strict";var n=i("d930"),e=i.n(n);e.a},f147:function(t,a,i){"use strict";var n=i("370a"),e=i.n(n);e.a},f5ed:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"page-bargain"},[i("Header",{attrs:{leftOptions:{showBack:!1},fixed:!0}},[t._v("\n    觅食蜂\n    "),i("div",{attrs:{slot:"left"},slot:"left"},[i("i",{staticClass:"left-arrow",on:{click:t.onClickBack}}),i("a",{staticClass:"cm-header-back",on:{click:t.onClickBack}},[t._v("返回")])])]),i("Scroll",{attrs:{isLoading:t.isLoading,finished:t.finished,listLen:t.listData.length,finishedTip:t.finishedTip},on:{onScrollToLower:t.onScrollToLower},model:{value:t.pullLoading,callback:function(a){t.pullLoading=a},expression:"pullLoading"}},[i("div",{staticClass:"product-info",on:{click:t.goProductDetail}},[i("div",{staticClass:"info"},[i("div",{staticClass:"info-image"},[i("img",{attrs:{src:t.productInfo.image}})]),i("div",{staticClass:"info-content"},[i("p",{staticClass:"product-title max-line-2"},[t._v(t._s(t.productInfo.name))]),i("span",{staticClass:"bargain-num"},[t._v(t._s(t.productInfo.bargainCount)+"人已砍价")]),i("div",{staticClass:"product-price"},[i("span",{staticClass:"cur-price"},[t._v("¥"+t._s(t._f("price")(t.productInfo.currentPrice)))]),i("del",{staticClass:"del-price"},[t._v(t._s(t._f("price")(t.productInfo.marketPrice)))])])])])]),i("div",{staticClass:"branch"},[i("branch-info",{attrs:{branchInfo:t.branchInfo}}),i("branch-address",{attrs:{addressInfo:t.addressInfo}})],1),i("div",{staticClass:"bargain"},[i("div",{staticClass:"bargain-btn",class:{"bargain-disabled":!t.bargainBtnInfo.canClick},on:{click:function(a){return t.clickBargainBtn(t.bargainBtnInfo.btnType)}}},[t._v("\n        "+t._s(t.bargainBtnInfo.btnText)+"\n      ")]),t.showBargainDesc?i("div",{staticClass:"bargain-describe"},[t.isBargained?i("p",{staticClass:"bargain-suc"},[t._v("\n          恭喜您，成功帮好友砍了"+t._s(t.bargainReduce)+"元！\n        ")]):t._e(),t.isBargained||t.isFloorPrice?t._e():i("p",{staticClass:"to-buy",on:{click:t.goProductDetail}},[t._v("\n          去抢购"),i("Icon",{staticClass:"arrow-right",attrs:{mode:"custom",type:"arrow-right"}})],1)]):t._e()]),i("div",{staticClass:"bargain-avatar"},[i("div",{staticClass:"avatar-tag"},[i("Tags",{attrs:{tags:t.avatarTags,center:!0}})],1),i("div",{staticClass:"avatar-list"},[t._l(t.avatarList,function(t,a){return[i("Avatar",{key:a,staticClass:"avatar-item",attrs:{src:t.avatar,size:40}})]})],2)]),i("div",{staticClass:"product-list"},[i("div",{staticClass:"product-tag"},[i("Tags",{attrs:{tags:t.productTags,center:!0}})],1),i("div",{staticClass:"list-box"},[i("product-list",{attrs:{listData:t.listData}})],1)])]),i("DownloadNav")],1)},e=[],s=i("75fc"),r=i("cebc"),c=i("2f62"),o=i("365c"),l=i("79bb"),d=i("38a5"),u=i("df3a"),f=i("1c14"),p=i("f770"),h=i("1aaf"),g=i("2446"),b=i("51e6"),v=i("4183"),m=i("ed08"),_=i("608a"),C=i("e380"),w={name:"bargain",mixins:[g["a"]],components:{Icon:d["a"],Avatar:u["a"],Tags:l["i"],ProductList:f["a"],BranchInfo:p["a"],BranchAddress:h["a"],Scroll:l["c"],Header:l["b"],DownloadNav:_["a"]},data:function(){return{productTags:[{name:"更多美食"}],productInfo:{},branchInfo:{starObj:{}},bargainBtnInfo:{},addressInfo:{},avatarList:[],isOnline:!0,isBargained:!1,isSold:!1,bargainReduce:"",isFloorPrice:!1}},computed:Object(r["a"])({},Object(c["d"])({userInfo:function(t){return t.user.userInfo}}),{avatarTags:function(){return[{name:"".concat(this.productInfo.bargainCount,"人正在抢购")}]},showBargainDesc:function(){return this.isOnline&&!this.isSold&&(this.isBargained||!this.isBargained&&!this.isFloorPrice)}}),created:function(){var t=this;this.$showLoading(),this.getGeo({success:function(a){t.getData()},fail:function(a){t.getData()}})},mounted:function(){},methods:Object(r["a"])({},Object(c["b"])(["getGeo"]),{getData:function(){this.getBargainDetail(),this.getActivityList()},getBargainDetail:function(){var t=this,a=this.$route.query.id||"681054";o["a"].helpbargain({activity_id:a},function(a){var i=a.data;t.bargainReduce=i.reduce,t.isOnline=1==i.online_status,t.isBargained=i.is_bargained,t.isSold=i.is_sold,t.isFloorPrice=i.current_price<=i.floor_price,t.bargainBtnInfo=t.dealButtonInfo(),t.productInfo={activityId:i.activity_id||"",name:i.item_name,image:i.item_pic,marketPrice:i.market_price,currentPrice:i.current_price,bargainCount:i.bargain_count||0};var n=i.branch||{};t.branchInfo={id:n.id,branchLogo:n.branch_head_pic,branchName:n.branch_name,articleNum:n.article_count,starVal:n.star},t.addressInfo={lng:n.lng,lat:n.lat,title:n.branch_name,address:n.address,phoneNumber:n.phone},t.avatarList=i.bargain_users||[],b["a"].wechat&&v["a"].setShare({title:i.item_name,weixin_timeline:{title:"最低1折起，快来砍价！".concat(n.branch_name,":").concat(i.item_name)},desc:"原价¥".concat(Object(m["c"])(i.market_price,100),"， 现在只要¥").concat(Object(m["c"])(i.current_price,100),"!快来帮我砍价，最低只要1折起！"),link:"".concat(location.origin,"/bargain?id=").concat(t.$route.query.id,"&publisher=").concat(t.userInfo.id||0),imgUrl:i.item_pic})},function(t){})},dealButtonInfo:function(){var t="继续砍价",a="bargain",i=!0;return this.isOnline?this.isSold?(t="已抢光",a="isSold",i=!1):this.isBargained?(t="立即抢购",a="goProductDetail",i=!0):this.isFloorPrice&&!this.isBargained&&(t="马上抢",a="goProductDetail",i=!0):(t="已下架",a="downLine",i=!1),{btnText:t,btnType:a,canClick:i}},pullModel:function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];o["a"].activityList.apply(this,a)},getActivityList:function(){this.initPullList(),this.onScrollToLower()},clickBargainBtn:function(t){switch(t){case"bargain":this.doBargain();break;case"goProductDetail":this.goProductDetail();break;case"downLine":case"isSold":default:break}},goProductDetail:function(){C["a"].event("c_bargain_buy"),this.$forward("product-detail",{id:this.productInfo.activityId})},doBargain:function(){var t=this;o["a"].bargain({activity_id:this.productInfo.activityId,citywide:1},function(a){var i=a.data;t.$showToast(i.result),t.bargainReduce=i.reduce,t.isBargained=i.is_bargained,t.productInfo=Object.assign(t.productInfo,{currentPrice:i.current_price,bargainCount:i.bargain_count}),t.bargainBtnInfo=t.dealButtonInfo(),t.dealBargainAvatar(),C["a"].event("c_bargain_friend","value:{bargained:1}")},function(a){if(91220003==a.errno?t.isOnline=!1:91220013==a.errno?t.isFloorPrice=!0:91220014==a.errno?t.isBargained=!0:91220004==a.errno&&(t.isSold=!0),C["a"].event("c_bargain_friend","value:{bargained:0}"),91220003==a.errno||91220013==a.errno||91220014==a.errno||91220004==a.errno)return t.bargainBtnInfo=t.dealButtonInfo(),t.$showToast(a.errmsg),!0})},dealBargainAvatar:function(){var t={id:this.userInfo.id,username:this.userInfo.nickname,avatar:this.userInfo.avatar};if(this.avatarList.length<16)this.avatarList=[t].concat(Object(s["a"])(this.avatarList));else{var a=this.avatarList.slice(0,15);this.avatarList=[t].concat(Object(s["a"])(a))}},onClickBack:function(){var t=window.history.length;t&&t<2?this.$forward("index"):this.$back()}})},I=w,k=(i("7fce"),i("2877")),y=Object(k["a"])(I,n,e,!1,null,"40ce64ee",null);a["default"]=y.exports},f770:function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"branch-info",on:{click:t.goBranch}},[i("div",{staticClass:"branch-logo"},[i("img",{attrs:{src:t.branchInfo.branchLogo}})]),i("div",{staticClass:"branch-content"},[i("p",{staticClass:"branch-name"},[t._v(t._s(t.branchInfo.branchName))]),i("div",{staticClass:"score"},[i("star",{staticClass:"star-block",attrs:{scoreMax:50,value:t.branchInfo.starVal}}),i("span",{staticClass:"article-num"},[t._v(t._s(t.branchInfo.articleNum)+"篇觅食笔记")])],1)]),i("div",{staticClass:"branch-right"},[i("Icon",{staticStyle:{color:"#B3B3B3"},attrs:{mode:"custom",type:"arrow-right"}})],1)])},e=[],s=i("38a5"),r=i("1470"),c=i("e380"),o={name:"branch-info",components:{Icon:s["a"],Star:r["a"]},props:{branchInfo:{type:Object,default:function(){return{starVal:0}}}},data:function(){return{}},methods:{goBranch:function(){var t=this.branchInfo.id||"",a="value:{storeId:".concat(t,"}");c["a"].event("c_good_store",a),this.$forward("shop-detail",{id:t})}}},l=o,d=(i("f147"),i("2877")),u=Object(d["a"])(l,n,e,!1,null,"648a0d72",null);a["a"]=u.exports}}]);