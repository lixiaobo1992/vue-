(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-21"],{cdee:function(e,t,s){},e2d3:function(e,t,s){"use strict";var a=s("cdee"),i=s.n(a);i.a},f699:function(e,t,s){"use strict";s.r(t);var a,i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-message"},[s("vue-scroll",{staticClass:"page-scroll",attrs:{finished:e.finished,listLen:e.listData.length,isLoading:e.isLoading,finishedTip:e.finishedTip,"immediate-check":e.scrollCheck},on:{onScrollToLower:e.onScrollToLower},model:{value:e.pullLoading,callback:function(t){e.pullLoading=t},expression:"pullLoading"}},[s("div",{staticClass:"block-list"},[e._l(e.listBlock,function(t,a){return[0==a&&e.todayList.length>0||1==a&&e.yesterList.length>0||2==a&&e.moreList.length>0?s("div",{key:t,staticClass:"message-block"},[s("div",{staticClass:"block-title"},[s("div",{staticClass:"title"},[e._v(e._s(t))])]),s("div",{staticClass:"list"},[0==a?e._l(e.todayList,function(t,i){return s("MessageItem",{key:i,attrs:{item:e.assignObj(t,i,a)},on:{toggleFollow:e.toggleFollow}})}):1==a?e._l(e.yesterList,function(t,i){return s("MessageItem",{key:i,attrs:{item:e.assignObj(t,i,a)},on:{toggleFollow:e.toggleFollow}})}):e._l(e.moreList,function(t,i){return s("MessageItem",{key:i,attrs:{item:e.assignObj(t,i,a)},on:{toggleFollow:e.toggleFollow}})})],2)]):e._e()]}),s("DefaultPage",{directives:[{name:"show",rawName:"v-show",value:!e.listData.length,expression:"!listData.length"}],attrs:{imgItem:e.imgItem,fontItem:e.fontItem}})],2)])],1)},n=[],r=(s("ac6a"),s("cebc")),l=s("bd86"),c=(s("7f7f"),s("2f62")),o=s("4183"),d=s("51e6"),u=s("df3a"),_=s("ba45"),f=s("79bb"),p=s("2446"),m=s("365c"),g=s("7f10"),h=s("2d7f"),v=s.n(h),y={mixins:[p["a"]],components:(a={Avatar:u["a"],MessageItem:_["a"]},Object(l["a"])(a,f["c"].name,f["c"]),Object(l["a"])(a,"DefaultPage",g["a"]),a),data:function(){return{hasMore:!0,listBlock:["今天","昨天","更早"],todayList:[],yesterList:[],moreList:[],avatar:"",imgItem:{src:v.a,width:250,height:212},fontItem:{width:240,desc:"你还没有收到任何消息哦～"}}},created:function(){this.refresh(),d["a"].msf&&this.initBridge()},mounted:function(){this.appConfig.unread=0,this.setAppConfig(this.appConfig);var e=this;this.isMSF&&o["a"].onPageShow({success:function(t){e.initBridge()}})},computed:Object(r["a"])({},Object(c["d"])({appConfig:function(e){return e.app.appConfig}})),beforeDestroy:function(){d["a"].msf&&(o["a"].disableRefresh(),o["a"].offPullRefresh(function(e){}),o["a"].offPageShow({}))},methods:Object(r["a"])({},Object(c["b"])(["setAppConfig"]),{pullModel:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];m["a"].messageList.apply(this,t)},afterPull:function(e){var t=e.data,s=void 0===t?{}:t;this.pullParams.last_time=s.page_serial||"";var a=s.list,i=this;a.forEach(function(e){var t;switch(e.type){case 1:t={type:e.type,sender_nickname:e.sender_nickname,sender_avatar:e.sender_avatar,status:e.status,content:e.title,is_followed:e.is_followed,sender_id:e.sender_id};break;case 2:case 3:t={type:e.type,sender_nickname:e.sender_nickname,sender_avatar:e.sender_avatar,status:e.status,content:e.title,article_pic:e.article_pic,sender_id:e.sender_id,article_id:e.article_id};break;case 4:t={type:e.type,sender_avatar:e.sender_avatar,sender_nickname:e.sender_nickname,content:" "+e.title,underText:e.content,article_pic:e.article_pic,status:e.status,sender_id:e.sender_id,article_id:e.article_id};break;case 5:t={status:e.status,sender_avatar:e.sender_avatar,type:e.type,sender_nickname:e.sender_nickname,content:" "+e.title,underText:e.content,article_pic:e.article_pic,sender_id:e.sender_id,article_id:e.article_id};break;case 6:case 7:t={status:e.status,sender_avatar:e.sender_avatar,type:e.type,sender_nickname:e.sender_nickname,content:e.title,underText:e.content,system_link:e.system_link};break;case 8:t={status:e.status,sender_avatar:e.sender_avatar,type:e.type,sender_nickname:"",content:" "+e.title,underText:e.content,article_pic:e.article_pic,sender_id:e.sender_id,article_id:e.article_id};break;case 9:t={status:e.status,sender_avatar:e.sender_avatar,type:e.type,sender_nickname:"",content:" "+e.title,underText:e.content,article_pic:e.article_pic,sender_id:e.sender_id,article_id:e.article_id};break;default:break}1==i.dealCreatTime(e.created_at)?i.todayList.push(t):2==i.dealCreatTime(e.created_at)?i.yesterList.push(t):i.moreList.push(t)})},initBridge:function(){var e=this;o["a"].enableRefresh(),o["a"].onPullRefresh({success:function(t){e.todayList=[],e.yesterList=[],e.moreList=[],e.refresh()}})},refresh:function(){this.initPullList(),this.pullParams=Object.assign({},this.pullParams,{last_time:this.pullParams.page_serial}),this.onScrollToLower()},dealCreatTime:function(e){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var s=t-864e5;return e*=1e3,e>t?1:e<t&&e>s?2:3},toggleFollow:function(e,t,s){var a=3!=e;0==s?this.$set(this.todayList[t],"is_followed",a):1==s?this.$set(this.yesterList[t],"is_followed",a):this.$set(this.moreList[t],"is_followed",a)},assignObj:function(e,t,s){return Object.assign(e,{index:t,listType:s})}})},b=y,k=(s("e2d3"),s("2877")),w=Object(k["a"])(b,i,n,!1,null,"65506f48",null);t["default"]=w.exports}}]);