(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-23"],{1176:function(t,e,a){"use strict";var s=a("e33a"),i=a.n(s);i.a},"9d17":function(t,e,a){t.exports=a.p+"static/img/order_expired.b764e167.png"},ce24:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice-box"},[a("div",{staticClass:"notice-text clearfix",domProps:{innerHTML:t._s(t.html)}})])},i=[],o={name:"notice-text",props:{html:{type:String,default:""}}},r=o,n=(a("e49c"),a("2877")),c=Object(n["a"])(r,s,i,!1,null,"cf3f3510",null);e["a"]=c.exports},d3bb:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-order-detail"},[s("div",{staticClass:"line-box"}),s("div",{staticClass:"product-box",on:{click:function(e){return t.goNext("goProduct")}}},[s("span",{staticClass:"product-name ellipsis"},[t._v(t._s(t.productName))]),s("Icon",{attrs:{mode:"custom",type:"arrow-right"}})],1),s("div",{staticClass:"goods-box",class:{"published-article":3==t.orderStatus&&2==t.artaicleStatus}},[s("div",{staticClass:"top-goods"},[s("div",{staticClass:"img-box"},[s("img",{staticClass:"product-img",attrs:{src:t.orderimg,alt:"商品"}})]),s("div",{staticClass:"right-desc"},[s("span",{staticClass:"order-number"},[t._v("订单号："+t._s(t.order_no))]),s("span",{staticClass:"order-address ellipsis"},[t._v(t._s(t.branchName))]),s("span",{staticClass:"order-price"},[5==t.orderStatus?s("i",{staticStyle:{"padding-right":"10px"}},[t._v("退款成功")]):t._e(),7==t.orderStatus?s("i",{staticStyle:{"padding-left":"10px"}},[t._v("退款中")]):t._e(),3==t.orderStatus?s("i",{staticClass:"note-text"},[t._v(t._s(t.noteText))]):t._e()]),4==t.orderStatus?s("div",{staticClass:"expired"},[s("img",{staticClass:"expired-img",attrs:{src:a("9d17")}})]):t._e()])]),t.dateStatus.showDateStatus?s("div",{staticClass:"date-status",class:{"check-article":3==t.orderStatus&&2==t.artaicleStatus}},[s("span",[t._v(t._s(t.dateStatus.dateStatusText))]),t.dateStatus.showBtn?s("a",{on:{click:function(e){return t.goNext(t.dateStatus.type)}}},[t._v(t._s(t.dateStatus.btnText))]):t._e()]):t._e(),2==t.orderStatus||3==t.orderStatus&&1==t.artaicleStatus?s("div",[s("button",{staticClass:"scan",attrs:{type:"button"},on:{click:function(e){return t.goNext(t.operationData.btnType)}}},[t.operationData.isScanCode?s("i",{staticClass:"scanIcon"}):t._e(),t._v(t._s(t.operationData.operationBtn)+"\n      ")]),s("span",{staticClass:"remind-note"},[s("i",{staticClass:"remind"}),s("p",[t._v("\n          "+t._s(t.operationData.operationDesc)+"\n          "),t.operationData.isScanCode?s("span",{staticClass:"store-btn"},[s("a",{staticClass:"store",on:{click:t.storeStatus}},[t._v("使用店码核销")])]):t._e()])])]):t._e()]),s("div",{staticClass:"line-box"}),-1==t.refundStatus?s("div",{staticClass:"buy-notes"},[s("span",{staticClass:"note-title"},[t._v("购买须知")]),s("NoticeText",{attrs:{html:t.tips}})],1):s("div",{staticClass:"refund-detail-box"},[s("div",{staticClass:"refund-detail-title"},[t._v("退款进程")]),s("div",{staticClass:"refund-detail-list"},t._l(t.refundDetailData,function(e,a){return s("div",{key:a,staticClass:"refund-detail"},[s("div",{staticClass:"detail-title"},[e.isAction?s("Icon",{staticClass:"choose-reason",attrs:{type:"choose-reason",color:"#FF5B00"}}):s("Icon",{staticClass:"wait",attrs:{type:"wait",color:"#DDDDDD"}}),s("p",[t._v(t._s(e.title))])],1),s("div",{staticClass:"detail-content"},[t._v(t._s(e.content))])])}),0),s("div",{staticClass:"custom-service"},[t._v("\n      有疑问？"),s("span",{on:{click:t.goCustomService}},[t._v("联系客服")])])]),t.storeShow?s("div",{staticClass:"security-code-wrap"},[s("div",{staticClass:"code-content"},[s("i",{staticClass:"closeIcon",on:{click:function(e){return t.closeModel()}}}),s("span",{staticClass:"code-title"},[t._v("请输入店码使用当前订单")]),s("label",{attrs:{for:"code"},on:{click:function(e){return t.inputCode()}}},[s("ul",{staticClass:"security-code-container"},t._l(t.number,function(e,a){return s("li",{key:a,staticClass:"field-wrap"},[s("i",{staticClass:"char-field"},[t._v(t._s(t.storeValue[a]||t.placeholder))])])}),0),s("p",{staticClass:"desc"},[t._v("使用前请确认已到店，且店铺可以兑换当前订单！")])])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.storeValue,expression:"storeValue"}],ref:"input",staticClass:"input-code",attrs:{id:"code",name:"code",type:"tel",maxlength:t.number,autocorrect:"off",autocomplete:"off",autocapitalize:"off"},domProps:{value:t.storeValue},on:{keyup:function(e){return t.handleInput(e)},input:function(e){e.target.composing||(t.storeValue=e.target.value)}}})]):t._e(),t.setInfo.popStatus?s("InvitePop",{attrs:{settingStatus:t.setInfo.settingStatus,setType:t.setInfo.setType,settingText:t.setInfo.settingText,btnText:t.setInfo.btnText},on:{btnEvent:t.btnEvent}}):t._e()],1)},i=[],o=(a("a481"),a("28a5"),a("cebc")),r=(a("c5f6"),a("365c")),n=a("51e6"),c=a("4183"),d=a("38a5"),u=a("ce24"),l=a("4f9d"),p=a("b0f3"),f=a("2f62"),h=a("c7af"),v={name:"order-detail",components:{Icon:d["a"],NoticeText:u["a"],InvitePop:h["a"]},props:{number:{type:Number,default:4},placeholder:{type:String,default:""}},data:function(){return{order_no:"",orderId:"",refundDetailData:[],orderStatus:3,branchName:"",orderimg:"",productName:"",orderPrice:"",refundType:1,refundStatus:1,storeShow:!1,storeValue:"",dateStatus:{},activityId:"",articleId:"",branchId:"",operationData:{},tips:"",artaicleStatus:"",noteText:"",setInfo:{settingStatus:!0,setType:6,settingText:"",btnText:[],popStatus:!1},honeyRuleUrl:"",honeyLimit:!1}},computed:{},created:function(){this.orderId=this.$route.query.id,this.getDetailData()},mounted:function(){},methods:Object(o["a"])({},Object(f["b"])(["setShareMask","setOrderShadeData"]),{getDetailData:function(){var t=this,e=this.$route.query.id;r["a"].orderdetail({order_id:e},function(e){var a=e.data;t.orderId=a.id,t.order_no=a.order_no,t.activityId=a.activity_id,t.artaicleStatus=a.article_status,t.articleId=a.article_id,t.branchId=a.branch_id,t.orderStatus=a.status,t.refundStatus=a.refund_status,t.branchName=a.branch_name,t.orderimg=a.item_pic,t.orderno=a.item_id,t.productName=a.item_name,t.orderPrice=a.amount,t.dateStatus=t.dealDateStatus(a),t.refundDetailData=t.dealRefundDetailData(a.refund_process),t.operationData=t.dealOperationData(a),t.tips=a.tips,t.noteText=t.noteStatusText(a.article_status)},function(e){t.$showToast(e.errmsg)})},dealRefundDetailData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map(function(t){return{isAction:!(0==t.process_time),title:t.title,content:t.detail}})},dealDateStatus:function(t){var e=t.status,a="",s=!1,i="",o=!0,r="";switch(e){case 2:a="有效期至 ".concat(Object(l["b"])(t.expire_time,"Y-M-D")),1==t.refund_type&&(s=!0,i="申请退款",r="refund");break;case 3:a="已使用 ".concat(Object(l["b"])(t.redeem_time,"Y-M-D H:F:S")),2==t.article_status&&(s=!0,i="查看笔记",r="lookArticle");break;case 4:a="已过期 ".concat(Object(l["b"])(t.expire_time,"Y-M-D H:F:S"));break;case 5:case 7:case 1:case 6:o=!1;break}return{dateStatusText:a,showBtn:s,btnText:i,showDateStatus:o,type:r}},dealOperationData:function(t){var e=t.status,a=t.article_status;if(2!=e&&(3!=e||1!=a))return{};var s="扫码使用",i="请认真查看购买须知，到店后扫描店内二维码使用，若扫码遇到问题，请在工作人员的帮助下",o=!0,r="scanCode";return 3==e&&(s="发布笔记轻松赢蜂蜜",i="累积更多蜂蜜将为你带来更多优惠，敬请期待哦~",o=!1,r="goPublish"),{operationBtn:s,operationDesc:i,isScanCode:o,btnType:r}},goNext:function(t){switch(t){case"refund":this.$forward("order-refund",{id:this.orderId});break;case"lookArticle":this.$forward("article",{id:this.articleId});break;case"goProduct":this.$forward("product-detail",{id:this.activityId});break;case"goPublish":this.$forward("publish",{order_id:this.orderId,activity_id:this.activityId});break;case"scanCode":if(n["a"].wxapp)return void this.$showToast("请前往觅食蜂app使用该功能");this.scanCode();break;default:break}},goCustomService:function(){this.$forward("service",{})},scanCode:function(){var t=this;n["a"].msf||n["a"].wechat?c["a"].scanQRCode().then(function(e){var a=e.code,s=Object(p["b"])(a),i=s.pathname,o=i.split("/");o.length&&"mqr"===o[0]?o[1]&&t.getRedeem(2,o[1]):t.$showToast("请您扫描正确的核销二维码")},function(t){}):this.$showToast({message:"您的客户端不支持扫码核销，使用店码核销吧～",duration:3e3})},storeStatus:function(){this.storeShow=!0,this.$el.style.overflowY="hidden"},getRedeem:function(t,e){var a=this;r["a"].redeem({order_id:this.orderId,redeem_type:parseInt(t),code:e},function(t){var e=t.data;a.setInfo.settingText=e.message,e.honey_limit?(a.honeyRuleUrl=e.honey_rule_url,a.setInfo.btnText=["了解蜂蜜抵扣规则"],a.setInfo.setType=5):(a.setInfo.btnText=["知道了"],a.setInfo.setType=6),a.honeyLimit=e.honey_limit,a.setInfo.popStatus=!0,a.getOrderNoticepop(),a.getDetailData()},function(t){return a.$showToast(t.errmsg),!0}),1==t&&this.closeModel()},inputCode:function(){this.$refs.input.focus()},closeModel:function(){this.$el.style.overflowY="scroll",this.storeShow=!1,this.storeValue=""},hideKeyboard:function(){var t=this;document.activeElement.blur(),this.$refs.input.blur(),this.$showLoading("正在核销..."),setTimeout(function(){t.getRedeem(1,t.storeValue)},1e3)},handleSubmit:function(){this.$emit("input",this.storeValue)},handleInput:function(t){this.$refs.input.value=this.storeValue,this.storeValue.length>=this.number&&this.hideKeyboard(),this.handleSubmit()},getOrderNoticepop:function(){var t=this;r["a"].orderNoticepop({},function(e){var a=e.data;a.is_pop&&(t.setShareMask({isShow:!0,type:4}),t.setOrderShadeData(a.pop_data),t.getOrderNoticeack())},function(t){})},getOrderNoticeack:function(){r["a"].orderNoticeack({},function(t){},function(t){})},noteStatusText:function(t){var e="";switch(t){case 1:e="笔记待发布";break;case 2:e="笔记审核中";break;case 4:e="笔记未通过审核";break;default:e="";break}return e},btnEvent:function(t){this.honeyLimit?"clear"==t.type?this.setInfo.popStatus=!1:(this.setInfo.popStatus=!1,location.replace(this.honeyRuleUrl)):this.setInfo.popStatus=!1}})},m=v,_=(a("1176"),a("2877")),b=Object(_["a"])(m,s,i,!1,null,"48175cf2",null);e["default"]=b.exports},e1c2:function(t,e,a){},e33a:function(t,e,a){},e49c:function(t,e,a){"use strict";var s=a("e1c2"),i=a.n(s);i.a}}]);