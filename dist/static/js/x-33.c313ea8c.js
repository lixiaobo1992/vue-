(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x-33"],{"0190":function(t,e,a){"use strict";var i=a("19b4"),n=a.n(i);n.a},1470:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"star-box"},t._l(t.starData,function(e,i){return a("span",{key:i,staticClass:"star-item",class:{active:e},on:{click:function(e){return e.stopPropagation(),t.clickEvent(i)}}})}),0)},n=[],s=(a("ac6a"),a("456d"),a("c5f6"),{name:"star",props:{value:Number,scoreMax:{type:Number,default:5}},data:function(){return{type:1,cardinal:this.scoreMax/5}},created:function(){},mounted:function(){},computed:{starData:function(){for(var t=[],e=Math.ceil(5*this.value/this.scoreMax),a=1;a<=5;a++)a<=e?t.push(1):t.push(0);return t}},methods:{clickEvent:function(t){if(Object.keys(this._events).indexOf("input")>-1){var e=t+1;this.value==this.cardinal&&0==t&&(e=0),this.$emit("input",this.cardinal*e)}}}}),o=s,c=(a("4649"),a("2877")),r=Object(c["a"])(o,i,n,!1,null,"053b221c",null);e["a"]=r.exports},1493:function(t,e,a){},"19b4":function(t,e,a){},"235d":function(t,e,a){"use strict";var i=a("d0cb"),n=a.n(i);n.a},"2c2b":function(t,e,a){"use strict";var i=a("6f9f"),n=a.n(i);n.a},"370a":function(t,e,a){},4649:function(t,e,a){"use strict";var i=a("d04c"),n=a.n(i);n.a},"6f9f":function(t,e,a){},"7f10":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"default-page"},[a("div",{staticClass:"top-img",style:t.styles}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.fontItem.desc,expression:"fontItem.desc"}],staticClass:"desc",style:t.fontStyle,domProps:{innerHTML:t._s(t.fontItem.desc)}})])},n=[],s={name:"DefaultPage",props:{imgItem:Object,fontItem:Object},computed:{styles:function(){var t=this.$props.imgItem,e=t.src,a=t.width,i=t.height;return{backgroundImage:e?"url('".concat(e,"')"):null,width:"".concat(a/100,"rem"),height:"".concat(i/100,"rem")}},fontStyle:function(){var t=this.$props.fontItem,e=t.size,a=t.color,i=t.width;return{fontSize:e?"".concat(e/100,"rem"):"12px",color:a||"#ccc",width:"".concat(i/100,"rem")}}},methods:{}},o=s,c=(a("c52c"),a("2877")),r=Object(c["a"])(o,i,n,!1,null,"6e735df8",null);e["a"]=r.exports},8645:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.item.avatar&&null!==t.item.nickname,expression:"item.avatar !== null && item.nickname !== null"}],staticClass:"item"},[a("div",{staticClass:"left-icon",on:{click:function(e){return t.goProfile(t.item.id)}}},[a("Avatar",{staticClass:"avatar",attrs:{src:t.item.avatar,navsrc:t.vipsrc,navSatus:t.item.qualityUser,size:46,bg:""}})],1),a("div",{staticClass:"content",on:{click:function(e){return t.goProfile(t.item.id)}}},[a("div",{staticClass:"level-box"},[a("div",{staticClass:"name ellipsis"},[t._v(t._s(t.item.name))]),t._l(t.levelList,function(e,i){return a("div",{key:i,staticClass:"level-img-box"},[e.level==t.item.level?a("img",{staticClass:"level-img",attrs:{src:e.image}}):t._e()])})],2),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.item.content&&t.item.article,expression:"!item.content && item.article"}],staticClass:"follow-desc ellipsis"},[t._v("\n      "+t._s(t.item.article)+"篇觅食记 "+t._s(t.item.fans)+"位粉丝\n    ")]),a("div",{staticClass:"follow-desc ellipsis"},[t._v("\n      "+t._s(t.item.content)+"\n    ")])]),t.item.followed?a("div",{staticClass:"btn",on:{click:function(e){return t.goNext(t.item.id,t.item.index,2)}}},[t._v("已关注")]):a("div",{staticClass:"btn follow",on:{click:function(e){return t.goNext(t.item.id,t.item.index)}}},[a("i",[t._v("+")]),t._v(" 关注\n  ")])])},n=[],s=a("365c"),o=a("df3a"),c=a("11a9"),r=a("e380"),l=a("0f26"),u=a.n(l),h={name:"FollowItem",components:{Avatar:o["a"]},props:{item:Object},data:function(){return{vipsrc:u.a,levelList:[{level:1,image:"https://img.mishifeng.com/FgY5XT2DOQPbe9DikpyOHsXltMcN"},{level:2,image:"https://img.mishifeng.com/FobnFz2hIEYX93jUsZ2vZ20Yrf_T"},{level:3,image:"https://img.mishifeng.com/FjMiAxVy_1QJBJ88i32P7MI-TJUb"},{level:4,image:"https://img.mishifeng.com/FoPcuQ2ZdOXo6f_neo3XROREd9dm"},{level:5,image:"https://img.mishifeng.com/Fv4AympZ5RM4f2S-GgedxnOD845C"},{level:6,image:"https://img.mishifeng.com/Fog7ZsXSvEaLUViwe-K3MHc7CP54"},{level:7,image:"https://img.mishifeng.com/FiUTqDr4AFMCFVi7tPHFVsDDVf1p"},{level:8,image:"https://img.mishifeng.com/FpWmuysyqR_cXUT5pSjO_kikdAMt"}]}},methods:{goNext:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this;2==a?c["a"].showConfirm({title:"",message:"是否取消关注",callback:function(a){"confirm"==a&&i.follow(t,e)}}):i.follow(t,e)},follow:function(t,e){var a=this;s["a"].toggleFollow({follow_user_id:t},function(t){var i=t.data.result;i&&a.$emit("toggleFollow",i,e)},function(t){if("91610301"==t.errno)return a.$showToast(t.errmsg),!0})},goProfile:function(t){t&&(r["a"].event("c_writer_icon"),this.$forward("profile",{id:t}))}}},f=h,d=(a("2c2b"),a("2877")),g=Object(d["a"])(f,i,n,!1,null,"1b187128",null);e["a"]=g.exports},c464:function(t,e,a){t.exports=a.p+"static/img/search-default.34740f21.png"},c52c:function(t,e,a){"use strict";var i=a("1493"),n=a.n(i);n.a},d04c:function(t,e,a){},d0cb:function(t,e,a){},df3a:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"avatar-warapper"},[a("div",{staticClass:"avatar-border"},[a("div",{staticClass:"vue-avatar",class:t.classes,style:t.styles},[t._t("default")],2),a("Icon",{staticClass:"avatar-mask",attrs:{type:"avatar-mask",color:t.maskColor}}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.navSatus,expression:"navSatus"}],staticClass:"bottom-nav",class:{navvip:t.navSatus},style:t.navStyles},[a("sub",{directives:[{name:"show",rawName:"v-show",value:t.navType>0,expression:"navType > 0"}]},[t._v(t._s(t.navText.navText))])])],1)])},n=[],s=a("bd86"),o=(a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("c5f6"),a("38a5")),c=a("526c"),r=a.n(c),l=a("e9d2"),u=a.n(l),h=a("a4b8"),f=a.n(h),d={scaleToFill:"contain",aspectFill:"cover",widthFix:"100% auto",heightFix:"auto 100%"},g={name:"avatar",components:{Icon:o["a"]},props:{prefixCls:String,src:String,spin:Boolean,shadow:Boolean,size:[String,Number],bg:String,color:String,mode:{type:String,default:"aspectFill",validator:function(t){return Object.keys(d).includes(t)}},shape:{type:String,validator:function(t){return["circle","hexagon"].includes(t)}},navSatus:{type:[Boolean,Number],default:!1},navType:{type:Number,default:0},navsrc:{type:String,default:r.a},maskColor:{type:String,default:"#ffffff"}},computed:{classes:function(){var t,e=this.$props,a=e.spin,i=e.shadow,n=e.shape;return t={},Object(s["a"])(t,"is-spin",a),Object(s["a"])(t,"is-".concat(n),!!n),Object(s["a"])(t,"is-shadow",!!i),t},styles:function(){var t=this.$props,e=t.src,a=t.size,i=void 0===a?0:a,n=t.color,s=t.bg,o=t.mode;return{backgroundImage:e?"url('".concat(e,"')"):null,width:"".concat(i/100,"rem"),height:"".concat(i/100,"rem"),color:!!n,backgroundColor:s||null,backgroundSize:d[o]}},navStyles:function(){var t=this.$props.navType,e="";switch(t){case 0:e=null;break;case 1:e=r.a;break;case 2:e=f.a;break;case 3:e=u.a;break;default:break}return{backgroundImage:"url('".concat(e,"')")}},navText:function(){var t=this.$props.navType,e="";switch(t){case 0:e="";break;case 1:e="认证达人";break;case 2:e="探店达人";break;case 3:e="官方账号";break;default:break}return{navText:e}}}},v=g,m=(a("0190"),a("2877")),p=Object(m["a"])(v,i,n,!1,null,"45f7c22a",null);e["a"]=p.exports},eee5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-search-article"},[a("Search",{ref:"search",attrs:{fixed:!0,placeholder:"搜索美食笔记、店铺或用户"},on:{"on-submit":t.onSubmit,"on-clear":t.onClear,"on-cancel":t.onCancel},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),a("Scroll",{attrs:{isLoading:t.isLoading,pullLoading:t.pullLoading,finished:t.finished,listLen:1,finishedTip:""},on:{onScrollToLower:t.onScrollToLower}},[a("div",{staticClass:"container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.showType,expression:"showType == 1"}],staticClass:"keyword-box"},[a("p",{directives:[{name:"show",rawName:"v-show",value:t.recentList.length,expression:"recentList.length"}],staticClass:"title"},[t._v("最近搜过的关键字")]),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.recentList.length,expression:"recentList.length"}],staticClass:"keyword-ul"},t._l(t.recentList,function(e,i){return a("li",{key:i,staticClass:"keyword-li",on:{click:function(a){return t.selectValue(e,i,i)}}},[t._v("\n            "+t._s(e)+"\n          ")])}),0),a("p",{directives:[{name:"show",rawName:"v-show",value:t.hotTags.length,expression:"hotTags.length"}],staticClass:"title"},[t._v("大家都在搜")]),a("ul",{staticClass:"keyword-ul"},t._l(t.hotTags,function(e,i){return a("li",{key:i,staticClass:"keyword-li",on:{click:function(a){return t.selectValue(e.name,i,e.id)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])}),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.showType,expression:"showType == 2"}],staticClass:"waterfall-box"},[a("div",{staticClass:"sub-title"},[a("div",{staticClass:"switch-btn",class:{active:1==t.currentSubTab},on:{click:function(e){return t.funcSwitchTab(1)}}},[t._v("\n            笔记\n          ")]),a("div",{staticClass:"switch-btn",class:{active:2==t.currentSubTab},on:{click:function(e){return t.funcSwitchTab(2)}}},[t._v("\n            用户\n          ")]),a("div",{staticClass:"switch-btn",class:{active:3==t.currentSubTab},on:{click:function(e){return t.funcSwitchTab(3)}}},[t._v("\n            店铺\n          ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentSubTab,expression:"currentSubTab == 1"}],staticClass:"water-list"},[a("water-fall",{ref:"waterfall",on:{ontap:t.onArticleTap}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.currentSubTab,expression:"currentSubTab == 2"}],staticClass:"water-list"},[a("DefaultPage",{directives:[{name:"show",rawName:"v-show",value:!t.followList.length,expression:"!followList.length"}],attrs:{imgItem:t.imgItem,fontItem:t.fontItem}}),t._l(t.followList,function(e,i){return a("FollowItem",{key:i,attrs:{item:e},on:{toggleFollow:t.toggleFollow}})})],2),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.currentSubTab,expression:"currentSubTab == 3"}],staticClass:"water-list"},[a("DefaultPage",{directives:[{name:"show",rawName:"v-show",value:!t.branchList.length,expression:"!branchList.length"}],attrs:{imgItem:t.imgItem,fontItem:t.fontItem}}),t._l(t.branchList,function(t,e){return a("branch-info",{key:e,attrs:{branchInfo:t}})})],2)])])])],1)},n=[],s=a("75fc"),o=(a("386d"),a("cebc")),c=a("365c"),r=a("79bb"),l=a("c2a1"),u=a("a516"),h=a("8645"),f=a("f770"),d=a("e380"),g=a("c464"),v=a.n(g),m=a("7f10"),p=a("2f62"),b={name:"search-article",components:{Search:r["d"],Scroll:r["c"],WaterFall:l["a"],FollowItem:h["a"],BranchInfo:f["a"],DefaultPage:m["a"]},data:function(){return{value:"",recentList:u["storage"].get("searcharticle")||[],showType:1,isLoading:!1,pullLoading:!1,finished:!1,pagination:{page_num:1,total_cnt:0,total_page:0,page_serial:""},currentSubTab:1,followList:[],followPagination:{page_num:1,total_cnt:0,total_page:0,page_serial:""},branchList:[],branchPagination:{page_num:1,total_cnt:0,total_page:0,page_serial:""},branchStatus:!0,imgItem:{src:v.a,width:250,height:200},fontItem:{width:240,desc:""}}},computed:Object(o["a"])({hotTags:function(){return this.$store.state.search.hotTags}},Object(p["d"])({location:function(t){return t.location}}),Object(p["c"])(["currAddress"])),created:function(){var t=this.$route.query.keyword;t&&this.onSearchKeyword(t),0===this.hotTags.length&&this.$store.dispatch("GetHotTags")},methods:Object(o["a"])({},Object(p["b"])(["getGeo","setSelectCity","setSelectAddress"]),{getArticleList:function(){var t=this;if(!this.isLoading&&!this.finished){var e=this.value,a=this.pagination.page_num,i=this.pagination.page_serial;this.isLoading=!0;var n="push";1==a?(this.pullLoading=!1,n="reset"):this.pullLoading=!0;var s=!this.pullLoading;c["a"].articleList({search:e,page_num:a,page_limit:20,page_serial:i,need_pagination:1,showLoading:s},function(e){var i=e.data,s=t;s.$refs.waterfall.setDate(i.list,n),s.pagination={page_serial:i.page_serial,total_cnt:i.total_cnt,total_page:i.total_page},a<i.total_page?(s.pagination.page_num++,s.finished=!1):s.finished=!0,s.showType=2,s.isLoading=!1,s.pullLoading=!1},function(e){t.isLoading=!1,t.pullLoading=!1})}},getFollowList:function(){var t=this,e=this.value||"",a=this.followPagination.page_num,i=this.followPagination.page_serial;c["a"].followList({nickname:e,type:1,page_num:a,page_serial:i,need_pagination:1},function(e){var i=e.data,n=i.list;t.followList=n.map(function(t,e){return Object.assign({avatar:t.avatar,followed:t.followed,name:t.nickname,article:t.article_num,fans:t.fans_num,id:t.user_id,quality_user:t.quality_user},{index:e})}),t.followPagination={page_serial:i.page_serial,total_cnt:i.total_cnt,total_page:i.total_page},a<i.total_page?(t.followPagination.page_num++,t.finished=!1):t.finished=!0,t.showType=2,t.isLoading=!1,t.pullLoading=!1},function(t){})},getBranchList:function(){var t=this,e=this.location.geoInfo,a=this.value||"",i=this.branchPagination.page_num,n=this.branchPagination.page_serial,s=e.lng,o=e.lat;c["a"].branchList({q:a,lng:s,lat:o,page_num:i,page_serial:n},function(e){var a=e.data,n=a.list;t.branchList=n.map(function(t,e){return Object.assign({id:t.id,branchLogo:t.branch_head_pic,branchName:t.branch_name,articleNum:t.article_count,starVal:t.star},{index:e})}),t.branchPagination={page_serial:a.page_serial,total_cnt:a.total_cnt,total_page:a.total_page},i<a.total_page?(t.branchPagination.page_num++,t.finished=!1):t.finished=!0,t.showType=2,t.isLoading=!1,t.pullLoading=!1},function(t){})},onSubmit:function(t){t&&(this.$refs.search.setBlur(),this.onSearchKeyword(t))},onCancel:function(){this.finished=!1,this.showType=1},onClear:function(){this.finished=!1,this.showType=1},selectValue:function(t,e,a){var i="index:".concat(e,",value:{tagId:").concat(a,"}");d["a"].event("c_search_history",i),this.onSearchKeyword(t)},onArticleTap:function(t){var e=t.id,a=t.index,i="index:".concat(a,",value:{articleId:").concat(e,"}");d["a"].event("c_article",i),this.$forward("article",{id:e})},onScrollToLower:function(){switch(this.currentSubTab){case 1:this.getArticleList();break;case 2:this.getFollowList();break;case 3:this.getBranchList();break;default:}},onSearchKeyword:function(t){this.value=t,this.pagination={page_num:1,total_cnt:0,total_page:0,page_serial:""},this.finished=!1,this.getArticleList(),this.getFollowList(),this.getBranchList(),this.setRecent(t)},setRecent:function(t){var e=Object(s["a"])(this.recentList),a=e.length,i=e.indexOf(t);i>0?(e.splice(i,1),e.unshift(t)):i<=-1&&(e.unshift(t),a>=10&&(e.length=10)),this.recentList=e,u["storage"].set("searcharticle",e,0)},funcSwitchTab:function(t){switch(this.currentSubTab=t,t){case 1:this.getArticleList();break;case 2:this.getFollowList();break;case 3:this.getBranchList();break;default:}},toggleFollow:function(t,e){var a=3!=t;this.$set(this.listData[e],"followed",a)}})},w=b,_=(a("235d"),a("2877")),y=Object(_["a"])(w,i,n,!1,null,"56e345a5",null);e["default"]=y.exports},f147:function(t,e,a){"use strict";var i=a("370a"),n=a.n(i);n.a},f770:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"branch-info",on:{click:t.goBranch}},[a("div",{staticClass:"branch-logo"},[a("img",{attrs:{src:t.branchInfo.branchLogo}})]),a("div",{staticClass:"branch-content"},[a("p",{staticClass:"branch-name"},[t._v(t._s(t.branchInfo.branchName))]),a("div",{staticClass:"score"},[a("star",{staticClass:"star-block",attrs:{scoreMax:50,value:t.branchInfo.starVal}}),a("span",{staticClass:"article-num"},[t._v(t._s(t.branchInfo.articleNum)+"篇觅食笔记")])],1)]),a("div",{staticClass:"branch-right"},[a("Icon",{staticStyle:{color:"#B3B3B3"},attrs:{mode:"custom",type:"arrow-right"}})],1)])},n=[],s=a("38a5"),o=a("1470"),c=a("e380"),r={name:"branch-info",components:{Icon:s["a"],Star:o["a"]},props:{branchInfo:{type:Object,default:function(){return{starVal:0}}}},data:function(){return{}},methods:{goBranch:function(){var t=this.branchInfo.id||"",e="value:{storeId:".concat(t,"}");c["a"].event("c_good_store",e),this.$forward("shop-detail",{id:t})}}},l=r,u=(a("f147"),a("2877")),h=Object(u["a"])(l,i,n,!1,null,"648a0d72",null);e["a"]=h.exports}}]);